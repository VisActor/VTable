--- категория: примеры группа: компонент заголовок: ячейка пользовательский дом компонент обложка: https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/preview/react-втаблица-ячейка-дом-компонент.jpeg порядок: 1-1 ссылка: '../../guide/пользовательский_define/react-пользовательский-компонент' --- # ячейка пользовательский дом компонент использовать Arкодsign в cells. для details, please refer к [пользовательский компонентs](../../guide/пользовательский_define/react-пользовательский-компонент) ## код демонстрация ```javascript живаядемонстрация шаблон=втаблица-react // импорт * as ReactВТаблица от '@visactor/react-втаблица'; const { useCallback, useRef, useState } = React; const { списоктаблица, СписокКолонка, группа } = ReactВТаблица; const { Avatar, Comment, Card, Popover, Space, Кнопка, Подтверждение, Messвозраст, уведомление } = Arкодsign; const { иконкаHeart, иконкаMessвозраст, иконкаStar, иконкаStarFill, иконкаHeartFill } = Arкодsignиконка; const Commentкомпонент = (props) => { const { таблица, строка, колонка, rect, данныеValue } = props; if (!таблица || строка === undefined || колонка === undefined) { возврат null; } const { высота, ширина } = rect || таблица.getCellRect(колонка, строка); const запись = таблица.getRecordByCell(колонка, строка); возврат ( <группа attribute={{ ширина, высота, react: { pointerсобытиеs: true, penetrateсобытиесписок: ['wheel'], контейнер: таблица.bodyDomContainer, // таблица.headerDomContainer // anchorType: 'низ-право', элемент: <CommentReactкомпонент имя={данныеValue} /> } }} ></группа> ); }; const CommentReactкомпонент = (props) => { const { имя } = props; const [like, setLike] = useState(); const [star, setStar] = useState(); const actions = [ <Кнопка classимя="пользовательский-comment-action" key="heart" onНажать={() => setLike(!like)}> {like ? <иконкаHeartFill стиль={{ цвет: '#f53f3f' }} /> : <иконкаHeart />} {83 + (like ? 1 : 0)} </Кнопка>, <Кнопка classимя="пользовательский-comment-action" key="star" onНажать={() => setStar(!star)}> {star ? <иконкаStarFill стиль={{ цвет: '#ffb400' }} /> : <иконкаStar />} {3 + (star ? 1 : 0)} </Кнопка>, <Кнопка classимя="пользовательский-comment-action" key="reply"> <иконкаMessвозраст /> Reply </Кнопка> ]; возврат ( <Comment actions={actions} author={имя} avatar={ <Popover заголовок={имя} content={ <span> <p>Here is the description из this user.</p> </span> } > <Avatar>{имя.slice(0, 1)}</Avatar> </Popover> } content={<div>Comment body content.</div>} datetime="1 hour" стиль={{ marginTop: 10, marginLeft: 10 }} /> ); }; const Operationкомпонент = (props) => { const { таблица, строка, колонка, rect, данныеValue } = props; if (!таблица || строка === undefined || колонка === undefined) { возврат null; } const { высота, ширина } = rect || таблица.getCellRect(колонка, строка); const запись = таблица.getRecordByCell(колонка, строка); возврат ( <группа attribute={{ ширина, высота, react: { pointerсобытиеs: true, penetrateсобытиесписок: ['wheel'], контейнер: таблица.bodyDomContainer, // таблица.headerDomContainer // anchorType: 'низ-право', элемент: <OperationReactкомпонент /> } }} ></группа> ); }; const OperationReactкомпонент = () => { возврат ( <Space размер="small" стиль={{ marginLeft: 10, marginTop: 40 }}> <Кнопка onНажать={() => уведомление.информация({ заголовок: 'Normal', content: 'Этоn ошибка уведомление!' }) } тип="primary" > информация </Кнопка> <Подтверждение focusLock заголовок="Confirm" content="Are you sure you want к delete?" onхорошо={() => { Messвозраст.информация({ content: 'хорошо' }); }} onотмена={() => { Messвозраст.ошибка({ content: 'отмена' }); }} > <Кнопка>Delete</Кнопка> </Подтверждение> </Space> ); }; функция generateRandomString(length) { let result = ''; const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'; для (let i = 0; i < length; i++) { result += characters.charAt(Math.floor(Math.random() * characters.length)); } возврат result; } функция App() { const records = []; для (let i = 0; i < 50; i++) { records.push({ ид: i, имя: generateRandomString(8) }); } возврат ( <списоктаблица records={records} высота={900} defaultRowвысота={110} onReady={таблица => { // eslint-отключить-следующий-line no-undef // (window as любой).таблицаInstance = таблица; }} ReactDOM={ReactDom} > <СписокКолонка поле={'ид'} заголовок={'ид'} /> <СписокКолонка поле={'имя'} заголовок={'Comment'} ширина={300}> <Commentкомпонент role={'пользовательский-макет'} /> </СписокКолонка> <СписокКолонка поле={''} заголовок={'Operation'} ширина={160}> <Operationкомпонент role={'пользовательский-макет'} /> </СписокКолонка> </списоктаблица> ); } const корень = ReactDom.createRoot(документ.getElementById(CONTAINER_ID)); корень.рендер(<App />); // Релиз react instance, do не copy window.пользовательскийРелиз = () => { корень.unmount(); }; ``` 