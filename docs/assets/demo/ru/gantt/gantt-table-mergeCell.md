--- категория: примеры группа: гантт заголовок: cellMerge в гантт обложка: https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/гантт/гантт-таблица-mergeCell.png ссылка: базовый_function/merge_cell опция: списоктаблица-колонки-текст#mergeCell --- # cellMerge в гантт в гантт, if the task имяs are the same, the visual effect из parent tasks containing subtasks can be achieved through ячейка merging. This can be done по setting the `mergeCell` property в `списоктаблица#колонки`. ## ключевая конфигурация - `гантт` - `втаблица#списоктаблица#колонка#mergeCell` ## код демонстрация ```javascript живаядемонстрация шаблон=втаблица // импорт * as втаблицагантт от '@visactor/втаблица-гантт'; // 使用时需要引入插件包@visactor/втаблица-editors // импорт * as втаблица_editors от '@visactor/втаблица-editors'; // 正常使用方式 const input_editor = новый втаблица.editors.InputEditor(); // 官网编辑器中将 втаблица.editors重命名成了втаблица_editors const input_editor = новый втаблица_editors.InputEditor(); const date_input_editor = новый втаблица_editors.DateInputEditor(); втаблицагантт.втаблица.регистрация.редактор('ввод', input_editor); втаблицагантт.втаблица.регистрация.редактор('date-ввод', date_input_editor); const barColors0 = ['#aecde6', '#c6a49a', '#ffb582', '#eec1de', '#b3d9b3', '#d9d1a5', '#cccccc', '#e59a9c', '#c9bede']; const barColors = ['#1f77b4', '#8c564b', '#ff7f0e', '#e377c2', '#2ca02c', '#bcbd22', '#7f7f7f', '#d62728', '#9467bd']; const bgColors = [ 'rgba(174,205,230,0.4)', 'rgba(198,164,154,0.4)', 'rgba(255,181,130,0.4)', 'rgba(238,193,222,0.4)', 'rgba(179,217,179,0.4)', 'rgba(217,209,165,0.4)', 'rgba(204,204,204,0.4)', 'rgba(229,154,156,0.4)', 'rgba(201,190,222,0.4)' ]; let ганттInstance; const records = [ { ид: 1, имя: 'Michael Smith', начало: '2024-11-15', конец: '2024-11-17', parentTask: 'Planning', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/wolf.jpg' }, { ид: 2, имя: 'Emily', начало: '2024-11-17', конец: '2024-11-18', parentTask: 'Planning', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/bear.jpg' }, { ид: 3, имя: 'Rramily', начало: '2024-11-19', конец: '2024-11-20', parentTask: 'Planning', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/bear.jpg' }, { ид: 4, имя: 'Lichael Join', начало: '2024-11-18', конец: '2024-11-19', parentTask: 'Planning', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/wolf.jpg' }, { ид: 5, имя: 'Ryan', начало: '2024-11-18', конец: '2024-11-21', parentTask: 'Research', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/rabbit.jpg' }, { ид: 6, имя: 'Daniel Davis', начало: '2024-11-21', конец: '2024-11-22', parentTask: 'Goal Setting', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/cat.jpg' }, { ид: 7, имя: 'Lauren', начало: '2024-11-18', конец: '2024-11-19', parentTask: 'Goal Setting', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/flower.jpg' }, { ид: 8, имя: 'Tacarah Siller', начало: '2024-11-20', конец: '2024-11-21', parentTask: 'Strategy', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/bear.jpg' }, { ид: 9, имя: 'Camentew Olision', начало: '2024-11-25', конец: '2024-11-26', parentTask: 'Strategy', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/wolf.jpg' }, { ид: 10, имя: 'Sarah Miller', начало: '2024-11-17', конец: '2024-11-18', parentTask: 'Strategy', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/bear.jpg' }, { ид: 11, имя: 'Matthew Wilson', начало: '2024-11-22', конец: '2024-11-25', parentTask: 'Strategy', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/wolf.jpg' }, { ид: 12, имя: 'Grarah Poliller', начало: '2024-11-23', конец: '2024-11-24', parentTask: 'Strategy', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/bear.jpg' }, { ид: 13, имя: 'Ashley Taylor', начало: '2024-11-22', конец: '2024-11-25', parentTask: 'Execution', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/rabbit.jpg' }, { ид: 14, имя: 'Megan', начало: '2024-11-27', конец: '2024-11-30', parentTask: 'Execution', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/cat.jpg' }, { ид: 15, имя: 'David', начало: '2024-12-10', конец: '2024-12-18', parentTask: 'Execution', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/flower.jpg' }, { ид: 16, имя: 'Hannah', начало: '2024-11-20', конец: '2024-11-30', parentTask: 'Monitoring', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/bear.jpg' }, { ид: 17, имя: 'Andrew', начало: '2024-12-02', конец: '2024-12-18', parentTask: 'Monitoring', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/wolf.jpg' }, { ид: 18, имя: 'Joshua Anderson', начало: '2024-12-22', конец: '2024-12-28', parentTask: 'Reporting', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/rabbit.jpg' }, { ид: 19, имя: 'Christopher Moore', начало: '2024-11-25', конец: '2024-11-30', parentTask: 'Process review', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/cat.jpg' }, { ид: 20, имя: 'Emma', начало: '2024-12-01', конец: '2024-12-18', parentTask: 'Process review', avatar: 'https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/пользовательский-рендер/flower.jpg' } ]; const колонки = [ { поле: 'parentTask', заголовок: 'Task', ширина: 100, mergeCell: true, редактор: 'ввод', стиль: { bgColor: '#EEF1F5', цвет: '#141414', fontWeight: 'bold', fontSize: 16, автоWrapText: true } }, { поле: 'имя', заголовок: 'Master', ширина: 100, редактор: 'ввод' }, { поле: 'начало', заголовок: 'начало', ширина: 100, сортировка: true, редактор: 'date-ввод' }, { поле: 'конец', заголовок: 'конец', ширина: 100, сортировка: true, редактор: 'date-ввод' } ]; const опция = { records, taskсписоктаблица: { колонки: колонки, minтаблицаширина: 100, hierarchyExpandLevel: 5, меню: { contextменюItems: ['copy', 'paste', 'delete', '...'] }, тема: { bodyStyle: { заполнение: 5, цвет(args) { const { строка } = args; const bgColor = barColors[(строка - 1) % 9]; возврат bgColor; }, bgColor(args) { const { строка } = args; const bgColor = bgColors[(строка - 1) % 9]; возврат bgColor; } }, headerStyle: { цвет: 'white' } } }, groupBy: true, tasksShowMode: втаблицагантт.TYPES.TasksShowMode.Tasks_Separate, frame: { outerFrameStyle: { borderLineширина: 1, borderColor: '#e1e4e8', cornerRadius: 8 }, verticalSplitLineMoveable: false }, grid: { horizontalBackgroundColor: bgColors, horizontalLine: { lineширина: 1, lineColor: '#e1e4e8' }, verticalLine: { lineширина: 1, lineColor: '#e1e4e8' } }, headerRowвысота: 60, rowвысота: 60, taskBar: { startDateполе: 'начало', endDateполе: 'конец', progressполе: 'progress', labelText: '{имя}', labelTextStyle: { fontFamily: 'Arial', fontSize: 16, textAlign: 'лево' }, barStyle: { ширина: 50, /** 任务条的颜色 */ barColor: '#ee8800', /** 已完成部分任务条的颜色 */ completedBarColor: '#91e8e0', /** 任务条的圆角 */ cornerRadius: 25 }, пользовательскиймакет: args => { const colorLength = barColors.length; const { ширина, высота, index, startDate, endDate, taskDays, progress, taskRecord, ганттInstance } = args; const контейнер = новый втаблицагантт.VRender.группа({ ширина, высота, заполнить: { gradient: 'linear', x0: 0, y0: 0, x1: 1, y1: 0, stops: [ { offset: 0, цвет: barColors0[index % colorLength] }, { offset: 0.5, цвет: barColors[index % colorLength] }, { offset: 1, цвет: barColors0[index % colorLength] } ] }, display: 'flex', flexDirection: 'строка', flexWrap: 'nowrap' }); const containerLeft = новый втаблицагантт.VRender.группа({ высота, ширина: 60, display: 'flex', flexDirection: 'колонка', alignItems: 'центр', justifyContent: 'space-around' // заполнить: 'red' }); контейнер.add(containerLeft); const иконка0 = новый втаблицагантт.VRender.Imвозраст({ ширина: 40, высота: 40, imвозраст: taskRecord.avatar, cornerRadius: 20 }); containerLeft.add(иконка0); const containerRight = новый втаблицагантт.VRender.группа({ высота, ширина: ширина - 60, display: 'flex', flexDirection: 'колонка' // alignItems: 'лево' }); контейнер.add(containerRight); const bloggerимя = новый втаблицагантт.VRender.текст({ текст: taskRecord.имя + ' ' + taskRecord.ид, fontSize: 16, fontFamily: 'sans-serif', заполнить: 'white', maxLineширина: ширина - 60, boundsPadding: [10, 0, 0, 0] }); containerRight.add(bloggerимя); const days = новый втаблицагантт.VRender.текст({ текст: `${taskDays}天`, fontSize: 13, fontFamily: 'sans-serif', заполнить: 'white', boundsPadding: [10, 0, 0, 0] }); containerRight.add(days); возврат { rootContainer: контейнер }; } }, dependency: { linkCreaтаблица: true, links: [ { тип: втаблицагантт.TYPES.DependencyType.StartToStart, linkedFromTaskKey: 1, linkedToTaskKey: 2 }, { тип: втаблицагантт.TYPES.DependencyType.FinishToStart, linkedFromTaskKey: 2, linkedToTaskKey: 3 }, { тип: втаблицагантт.TYPES.DependencyType.StartToStart, linkedFromTaskKey: 3, linkedToTaskKey: 5 }, { тип: втаблицагантт.TYPES.DependencyType.FinishToFinish, linkedFromTaskKey: 5, linkedToTaskKey: 4 }, { тип: втаблицагантт.TYPES.DependencyType.StartToStart, linkedFromTaskKey: 8, linkedToTaskKey: 9 }, { тип: втаблицагантт.TYPES.DependencyType.FinishToStart, linkedFromTaskKey: 9, linkedToTaskKey: 10 } ] }, timelineHeader: { colширина: 100, verticalLine: { lineColor: '#e1e4e8', lineширина: 1 }, horizontalLine: { lineColor: '#e1e4e8', lineширина: 1 }, backgroundColor: '#63a8ff', scales: [ { unit: 'day', step: 1, format(date) { возврат date.dateIndex.toString(); }, стиль: { fontSize: 20, fontWeight: 'bold', цвет: 'white' } } ] }, minDate: '2024-11-14', maxDate: '2024-12-31', scrollStyle: { scrollRailColor: 'RGBA(246,246,246,0.5)', видимый: 'никто', ширина: 6, scrollSliderCornerRadius: 2, scrollSliderColor: '#5cb85c' } }; ганттInstance = новый втаблицагантт.гантт(документ.getElementById(CONTAINER_ID), опция); window['ганттInstance'] = ганттInstance; ``` 