--- категория: примеры группа: данные-анализ заголовок: сводный анализ таблица drill down и drill up обложка: https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/втаблица/preview/сводный-анализ-таблица-drill.gif ссылка: данные_analysis/сводный_таблица_данныеAnalysis опция: сводныйтаблица-колонки-текст#drillDown --- # сводный анализ таблица drill down и drill up Add the drillDown конфигурация item к the dimension конфигурация rows или колонки к display the download Кнопка, списокen к the иконка Кнопка Нажать событие `drillменю_Нажать`, determine whether к drill down или roll up the dimension according к the событие параметр `drillDown` или `drillUp`, determine the dimension к drill down или drill up according к the параметр `dimensionKey`, add или delete it к rows или колонки, obtain the данные source corresponding к the новый dimension level, и call the интерфейс `updateOption` к update the новый опция к the таблица. в the демонстрация пример below, if you навести the mouse over the строка dimension, a drill-down Кнопка will appear. Нажатьing it will add `под-Категория` к the строка dimension. ## Ключевые Конфигурации - `сводныйтаблица` таблица тип - `колонки` колонка dimension конфигурация - `колонки.drillDown` dimension drill-down конфигурация - `колонки.drillUp` dimension drill-up конфигурация - `rows` строка dimension конфигурация - `indicators` indicator конфигурация ## код демонстрация ```javascript живаядемонстрация шаблон=втаблица let таблицаInstance; const данные = [ { Регион: 'Central', категория: 'Furniture', Количество: '16' }, { Регион: 'Central', категория: 'Furniture', Количество: '4' }, { Регион: 'Central', категория: 'Office Supplies', Продажи: '37.90399980545044' }, { Регион: 'Central', категория: 'Office Supplies', Продажи: '62.22999954223633' }, { Регион: 'Central', категория: 'Technology', Количество: '10' }, { Регион: 'Central', категория: 'Technology', Количество: '4' }, { Регион: 'East', категория: 'Furniture', Количество: '7' }, { Регион: 'East', категория: 'Furniture', Количество: '18' }, { Регион: 'East', категория: 'Office Supplies', Количество: '7' }, { Регион: 'East', категория: 'Office Supplies', Количество: '17' }, { Регион: 'East', категория: 'Office Supplies', Количество: '7' }, { Регион: 'East', категория: 'Office Supplies', Количество: '17' }, { Регион: 'South', категория: 'Furniture', Количество: '4' }, { Регион: 'South', категория: 'Furniture', Количество: '6' }, { Регион: 'South', категория: 'Technology', Прибыль: '4.361999988555908' }, { Регион: 'South', категория: 'Technology', Прибыль: '280.58800506591797' } ]; const опция = { records: данные, rows: [ { dimensionKey: 'Категория', заголовок: 'Категория', drillDown: true, headerStyle: { textStick: true }, ширина: 'авто' } ], колонки: [ { dimensionKey: 'Регион', заголовок: 'Регион', headerStyle: { textStick: true }, ширина: 'авто' } ], indicators: [ { indicatorKey: 'Количество', заголовок: 'Количество', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } }, { indicatorKey: 'Продажи', заголовок: 'Продажи', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, format: rec => { возврат '$' + число(rec).toFixed(2); }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } }, { indicatorKey: 'Прибыль', заголовок: 'Прибыль', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, format: rec => { возврат '$' + число(rec).toFixed(2); }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } } ], угол: { titleOnDimension: 'строка', headerStyle: { textStick: true } }, ширинаMode: 'standard' }; таблицаInstance = новый втаблица.сводныйтаблица(документ.getElementById(CONTAINER_ID), опция); window['таблицаInstance'] = таблицаInstance; const newданные = [ { Регион: 'Central', категория: 'Furniture', Количество: '16', 'под-Категория': 'Chairs' }, { Регион: 'Central', категория: 'Furniture', Количество: '4', 'под-Категория': 'таблицаs' }, { Регион: 'Central', категория: 'Office Supplies', Продажи: '37.90399980545044', 'под-Категория': 'Paper' }, { Регион: 'Central', категория: 'Office Supplies', Продажи: '62.22999954223633', 'под-Категория': 'Appliances' }, { Регион: 'Central', категория: 'Technology', Количество: '10', 'под-Категория': 'Phones' }, { Регион: 'Central', категория: 'Technology', Количество: '4', 'под-Категория': 'Accessories' }, { Регион: 'East', категория: 'Furniture', Количество: '7', 'под-Категория': 'Boхорошоcases' }, { Регион: 'East', категория: 'Furniture', Количество: '18', 'под-Категория': 'Furnishings' }, { Регион: 'East', категория: 'Office Supplies', Количество: '7', 'под-Категория': 'Paper' }, { Регион: 'East', категория: 'Office Supplies', Количество: '17', 'под-Категория': 'Binders' }, { Регион: 'South', категория: 'Furniture', Количество: '4', 'под-Категория': 'Furnishings' }, { Регион: 'South', категория: 'Furniture', Количество: '6', 'под-Категория': 'таблицаs' }, { Регион: 'South', категория: 'Technology', Прибыль: '4.361999988555908', 'под-Категория': 'Accessories' }, { Регион: 'South', категория: 'Technology', Прибыль: '280.58800506591797', 'под-Категория': 'Phones' } ]; таблицаInstance.на('drillменю_Нажать', args => { if (args.drillDown) { if (args.dimensionKey === 'Категория') { таблицаInstance.updateOption({ records: newданные, rows: [ { dimensionKey: 'Категория', заголовок: 'Категория', drillUp: true, headerStyle: { textStick: true }, ширина: 'авто' }, { dimensionKey: 'под-Категория', заголовок: 'под-Catogery', headerStyle: { textStick: true }, ширина: 'авто' } ], колонки: [ { dimensionKey: 'Регион', заголовок: 'Регион', headerStyle: { textStick: true }, ширина: 'авто' } ], indicators: [ { indicatorKey: 'Количество', заголовок: 'Количество', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } }, { indicatorKey: 'Продажи', заголовок: 'Продажи', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, format: rec => { возврат '$' + число(rec).toFixed(2); }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } }, { indicatorKey: 'Прибыль', заголовок: 'Прибыль', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, format: rec => { возврат '$' + число(rec).toFixed(2); }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } } ], угол: { titleOnDimension: 'строка', headerStyle: { textStick: true } }, ширинаMode: 'standard' }); } } else if (args.drillUp) { if (args.dimensionKey === 'Категория') { таблицаInstance.updateOption({ records: данные, rows: [ { dimensionKey: 'Категория', заголовок: 'Категория', drillDown: true, headerStyle: { textStick: true }, ширина: 'авто' } ], колонки: [ { dimensionKey: 'Регион', заголовок: 'Регион', headerStyle: { textStick: true }, ширина: 'авто' } // { // "dimensionKey": "порядок Year", // "заголовок": "порядок Year", // "headerStyle": { // "textStick": true // }, // "ширина": "авто", // }, ], indicators: [ { indicatorKey: 'Количество', заголовок: 'Количество', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } }, { indicatorKey: 'Продажи', заголовок: 'Продажи', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, format: rec => { возврат '$' + число(rec).toFixed(2); }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } }, { indicatorKey: 'Прибыль', заголовок: 'Прибыль', ширина: 'авто', showсортировка: false, headerStyle: { fontWeight: 'normal' }, format: rec => { возврат '$' + число(rec).toFixed(2); }, стиль: { заполнение: [16, 28, 16, 28], цвет(args) { if (args.данныеValue >= 0) возврат 'black'; возврат 'red'; } } } ], угол: { titleOnDimension: 'строка', headerStyle: { textStick: true } }, ширинаMode: 'standard' }); } } }); ``` 