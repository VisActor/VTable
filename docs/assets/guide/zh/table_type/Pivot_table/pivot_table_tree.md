## 透视表树形结构

默认情况下，透视表的行表头是平铺显示的，如果行表头包含多个层级，可能会很难看清楚不同层级之间的关系。透视表树形结构展示的功能，能帮助您更好地管理和分析数据。它具有以下几点优势：

- 结构清晰：树形结构将数据进行层次化管理，使数据的关系更加明确；
- 易于分析：树形结构的节点可以自由展开和折叠，方便用户针对不同层级进行数据分析；

## 配置项

透视表树形结构展示的主要配置参数：

- indicatorsAsCol：指标是否作为列表头展示，默认为 true；注意：树形展示的设置下，这里只支持设置为 true，也就是指标必须显示在列表头上；
- rowHierarchyType：设置行表头层级维度结构的显示形式，将其设置为 'tree' 来实现树形展示；
- rowExpandLevel：设置默认展开层数；
- rowHierarchyIndent：设置子层级维度值相比父级维度值在单元格中位置的缩进距离。
- rowHierarchyTextStartAlignment:同层级的结点是否按文字对齐 如没有收起展开图标的节点和有图标的节点文字对齐 默认 false。
- hierarchyState：设置节点的折叠状态，该项在 rowTree 或者 columnTree 的节点中进行配置。
- extensionRows：特殊的树形结构展示，需要展示多列树形结构的情况下设置该树形。需要注意的是：
  - rowExpandLevel 只对外层主树 rowTree 起作用，对 extensionRows 中的树不生效。
  - 针对这种多列的树形结构，拖拽移动表头能力不支持。
  - updateOption 调用后，非 rowTree 节点收起展开的状态的维护不支持。

## 基本用法示例

我们来逐一配置透视表树形展示的关键参数：

1.  首先设置 rowHierarchyType 为 'tree'，表示行表头采用树形结构;
2.  设置 rowExpandLevel 为 2，表示默认展开两层；
3.  设置 rowHierarchyIndent 为 20，表示每一层的缩进距离为 20 像素；
4.  如有特殊节点状态要求，可以通过设置 rowTree 中某个节点属性 hierarchyState 为`expand`或者`collapse`。

然后，以下是完整的配置示例代码及效果：

```javascript livedemo   template=vtable
const data = [
  {
    10002: '36004.12287902832',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '36004.12287902832',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Bookcases'
  },
  {
    10002: '-1646.5089945793152',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-1646.5089945793152',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Bookcases'
  },
  {
    10002: '10899.361869812012',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '10899.361869812012',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Bookcases'
  },
  {
    10002: '1339.4909970760345',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '1339.4909970760345',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Bookcases'
  },
  {
    10002: '24157.178108215332',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '24157.178108215332',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Bookcases'
  },
  {
    10002: '-1997.9050402641296',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-1997.9050402641296',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Bookcases'
  },
  {
    10002: '43819.33399963379',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '43819.33399963379',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Bookcases'
  },
  {
    10002: '-1167.6339691877365',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-1167.6339691877365',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Bookcases'
  },
  {
    10002: '101781.32774353027',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '101781.32774353027',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Chairs'
  },
  {
    10002: '4027.58094894886',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '4027.58094894886',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Chairs'
  },
  {
    10002: '45176.44617843628',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '45176.44617843628',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Chairs'
  },
  {
    10002: '6612.087041854858',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '6612.087041854858',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Chairs'
  },
  {
    10002: '85230.64583206177',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '85230.64583206177',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Chairs'
  },
  {
    10002: '6592.718985438347',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '6592.718985438347',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Chairs'
  },
  {
    10002: '96260.68257522583',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '96260.68257522583',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Chairs'
  },
  {
    10002: '9357.765951037407',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '9357.765951037407',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Chairs'
  },
  {
    10002: '30072.729959964752',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '30072.729959964752',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Furnishings'
  },
  {
    10002: '7641.274031370878',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '7641.274031370878',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Furnishings'
  },
  {
    10002: '17306.68389749527',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '17306.68389749527',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Furnishings'
  },
  {
    10002: '3442.686985105276',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '3442.686985105276',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Furnishings'
  },
  {
    10002: '15254.369949698448',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '15254.369949698448',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Furnishings'
  },
  {
    10002: '-3906.223020374775',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-3906.223020374775',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Furnishings'
  },
  {
    10002: '29071.379935264587',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '29071.379935264587',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Furnishings'
  },
  {
    10002: '5881.414980173111',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '5881.414980173111',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Furnishings'
  },
  {
    10002: '84754.5619468689',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '84754.5619468689',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Tables'
  },
  {
    10002: '1482.6120259165764',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '1482.6120259165764',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Tables'
  },
  {
    10002: '43916.19310760498',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '43916.19310760498',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Tables'
  },
  {
    10002: '-4623.056034088135',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-4623.056034088135',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Tables'
  },
  {
    10002: '39154.970703125',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '39154.970703125',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Tables'
  },
  {
    10002: '-3559.6519879102707',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-3559.6519879102707',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Tables'
  },
  {
    10002: '39139.806856155396',
    10003: '230627170530019',
    230627170530016: 'Furniture',
    230627170530019: '39139.806856155396',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Tables'
  },
  {
    10002: '-11025.375987529755',
    10003: '230627170530022',
    230627170530016: 'Furniture',
    230627170530022: '-11025.375987529755',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Tables'
  },
  {
    10002: '30236.3359644413',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '30236.3359644413',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Appliances'
  },
  {
    10002: '8261.27197098732',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '8261.27197098732',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Appliances'
  },
  {
    10002: '19525.326094150543',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '19525.326094150543',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Appliances'
  },
  {
    10002: '4123.939019560814',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '4123.939019560814',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Appliances'
  },
  {
    10002: '23582.032926678658',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '23582.032926678658',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Appliances'
  },
  {
    10002: '-2638.6159623861313',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '-2638.6159623861313',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Appliances'
  },
  {
    10002: '34188.466317892075',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '34188.466317892075',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Appliances'
  },
  {
    10002: '8391.413984239101',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '8391.413984239101',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Appliances'
  },
  {
    10002: '9212.066044569016',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '9212.066044569016',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Art'
  },
  {
    10002: '2374.101003214717',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '2374.101003214717',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Art'
  },
  {
    10002: '4655.6219692230225',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '4655.6219692230225',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Art'
  },
  {
    10002: '1058.5850008130074',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1058.5850008130074',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Art'
  },
  {
    10002: '5765.340019583702',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '5765.340019583702',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Art'
  },
  {
    10002: '1195.1630011796951',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1195.1630011796951',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Art'
  },
  {
    10002: '7485.764034986496',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '7485.764034986496',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Art'
  },
  {
    10002: '1899.942004531622',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1899.942004531622',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Art'
  },
  {
    10002: '55961.11282122135',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '55961.11282122135',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Binders'
  },
  {
    10002: '16096.799980849028',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '16096.799980849028',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Binders'
  },
  {
    10002: '37030.34099626541',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '37030.34099626541',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Binders'
  },
  {
    10002: '3900.6622482538223',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '3900.6622482538223',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Binders'
  },
  {
    10002: '56923.28208118677',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '56923.28208118677',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Binders'
  },
  {
    10002: '-1043.632896721363',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '-1043.632896721363',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Binders'
  },
  {
    10002: '53497.99653959274',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '53497.99653959274',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Binders'
  },
  {
    10002: '11267.932148218155',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '11267.932148218155',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Binders'
  },
  {
    10002: '4118.099995136261',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '4118.099995136261',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Envelopes'
  },
  {
    10002: '1908.761996269226',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1908.761996269226',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Envelopes'
  },
  {
    10002: '3345.555993080139',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '3345.555993080139',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Envelopes'
  },
  {
    10002: '1465.4750101566315',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1465.4750101566315',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Envelopes'
  },
  {
    10002: '4636.871988296509',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '4636.871988296509',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Envelopes'
  },
  {
    10002: '1777.5259877443314',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1777.5259877443314',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Envelopes'
  },
  {
    10002: '4375.874011039734',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '4375.874011039734',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Envelopes'
  },
  {
    10002: '1812.4089943170547',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1812.4089943170547',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Envelopes'
  },
  {
    10002: '923.2159950733185',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '923.2159950733185',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Fasteners'
  },
  {
    10002: '275.19199895858765',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '275.19199895858765',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Fasteners'
  },
  {
    10002: '503.3160014152527',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '503.3160014152527',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Fasteners'
  },
  {
    10002: '173.71899946779013',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '173.71899946779013',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Fasteners'
  },
  {
    10002: '778.0299946069717',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '778.0299946069717',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Fasteners'
  },
  {
    10002: '236.6199992671609',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '236.6199992671609',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Fasteners'
  },
  {
    10002: '819.7179999351501',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '819.7179999351501',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Fasteners'
  },
  {
    10002: '263.98999811708927',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '263.98999811708927',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Fasteners'
  },
  {
    10002: '5078.726016759872',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '5078.726016759872',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Labels'
  },
  {
    10002: '2303.1279985904694',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '2303.1279985904694',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Labels'
  },
  {
    10002: '2353.179967880249',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '2353.179967880249',
    230627170530056: 'Sales',
    230627170530059: 'South',
    230627170530068: 'Labels'
  },
  {
    10002: '1040.771997153759',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1040.771997153759',
    230627170530056: 'Profit',
    230627170530059: 'South',
    230627170530068: 'Labels'
  },
  {
    10002: '2451.4719779491425',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '2451.4719779491425',
    230627170530056: 'Sales',
    230627170530059: 'Central',
    230627170530068: 'Labels'
  },
  {
    10002: '1073.0799936652184',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1073.0799936652184',
    230627170530056: 'Profit',
    230627170530059: 'Central',
    230627170530068: 'Labels'
  },
  {
    10002: '2602.934000492096',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '2602.934000492096',
    230627170530056: 'Sales',
    230627170530059: 'East',
    230627170530068: 'Labels'
  },
  {
    10002: '1129.2839995622635',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '1129.2839995622635',
    230627170530056: 'Profit',
    230627170530059: 'East',
    230627170530068: 'Labels'
  },
  {
    10002: '26663.717969417572',
    10003: '230627170530019',
    230627170530016: 'Office Supplies',
    230627170530019: '26663.717969417572',
    230627170530056: 'Sales',
    230627170530059: 'West',
    230627170530068: 'Paper'
  },
  {
    10002: '12119.230026364326',
    10003: '230627170530022',
    230627170530016: 'Office Supplies',
    230627170530022: '12119.230026364326',
    230627170530056: 'Profit',
    230627170530059: 'West',
    230627170530068: 'Paper'
  }
];
const option = {
  records: data,
  rowTree: [
    {
      dimensionKey: '230627170530016',
      value: 'Furniture',
      hierarchyState: 'expand',
      children: [
        {
          dimensionKey: '230627170530068',
          value: 'Bookcases',
          hierarchyState: 'collapse'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Chairs',
          hierarchyState: 'collapse'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Furnishings'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Tables'
        }
      ]
    },
    {
      dimensionKey: '230627170530016',
      value: 'Office Supplies',
      children: [
        {
          dimensionKey: '230627170530068',
          value: 'Appliances'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Art'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Binders'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Envelopes'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Fasteners'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Labels'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Paper'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Storage'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Supplies'
        }
      ]
    },
    {
      dimensionKey: '230627170530016',
      value: 'Technology',
      children: [
        {
          dimensionKey: '230627170530068',
          value: 'Accessories'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Copiers'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Machines'
        },
        {
          dimensionKey: '230627170530068',
          value: 'Phones'
        }
      ]
    }
  ],
  columnTree: [
    {
      dimensionKey: '230627170530059',
      value: 'West',
      children: [
        {
          dimensionKey: '230627170530056',
          value: 'Sales',
          indicatorKey: '230627170530019'
        },
        {
          dimensionKey: '230627170530056',
          value: 'Profit',
          indicatorKey: '230627170530022'
        }
      ]
    },
    {
      dimensionKey: '230627170530059',
      value: 'South',
      children: [
        {
          dimensionKey: '230627170530056',
          value: 'Sales',
          indicatorKey: '230627170530019'
        },
        {
          dimensionKey: '230627170530056',
          value: 'Profit',
          indicatorKey: '230627170530022'
        }
      ]
    },
    {
      dimensionKey: '230627170530059',
      value: 'Central',
      children: [
        {
          dimensionKey: '230627170530056',
          value: 'Sales',
          indicatorKey: '230627170530019'
        },
        {
          dimensionKey: '230627170530056',
          value: 'Profit',
          indicatorKey: '230627170530022'
        }
      ]
    },
    {
      dimensionKey: '230627170530059',
      value: 'East',
      children: [
        {
          dimensionKey: '230627170530056',
          value: 'Sales',
          indicatorKey: '230627170530019'
        },
        {
          dimensionKey: '230627170530056',
          value: 'Profit',
          indicatorKey: '230627170530022'
        }
      ]
    }
  ],
  rows: [
    {
      dimensionKey: '230627170530016',
      title: 'Catogery',
      width: 'auto'
    },
    {
      dimensionKey: '230627170530068',
      title: 'Sub-Catogery',
      width: 'auto'
    }
  ],
  columns: [
    {
      dimensionKey: '230627170530059',
      title: 'Region',
      headerStyle: {
        textStick: true
      },
      width: 'auto'
    }
  ],
  indicators: [
    {
      indicatorKey: '230627170530019',
      title: 'Sales',
      width: 'auto',
      showSort: false,
      headerStyle: {
        fontWeight: 'normal'
      },
      format: value => {
        if (value) return '$' + Number(value).toFixed(2);
        return '';
      },
      style: {
        padding: [16, 28, 16, 28],
        color(args) {
          if (args.dataValue >= 0) return 'black';
          return 'red';
        }
      }
    },
    {
      indicatorKey: '230627170530022',
      title: 'Profit',
      width: 'auto',
      showSort: false,
      headerStyle: {
        fontWeight: 'normal'
      },
      format: value => {
        if (value) return '$' + Number(value).toFixed(2);
        return '';
      },
      style: {
        padding: [16, 28, 16, 28],
        color(args) {
          if (args.dataValue >= 0) return 'black';
          return 'red';
        }
      }
    }
  ],
  corner: {
    titleOnDimension: 'row',
    headerStyle: {
      textStick: true
    }
  },
  rowHierarchyType: 'tree',
  widthMode: 'standard',
  rowHierarchyIndent: 20,
  rowHierarchyTextStartAlignment: true
};
const tableInstance = new VTable.PivotTable(document.getElementById(CONTAINER_ID), option);
```

可以看到，透视表树形结构展示功能能够清晰地呈现数据的层次关系，方便用户进行数据分析。

## 指定表头某个节点的收起或者展开状态

上述示例中可以设置数据节点的 `hierarchyState` 来指定节点的收起或者展开状态，其值为 `expand` 或者 `collapse`。

例如指定 rowTree 某个节点为展开状态：`hierarchyState: 'expand'`。

```javascript
const option = {
  rowTree: [
    {
      dimensionKey: '230627170530016',
      value: 'Furniture',
      hierarchyState: 'expand',
      children: [
        // ...
      ]
    }
  ]
};
```

## 子节点数据懒加载用法

如果不期望把所有数据在初始化时都提供到，而是在节点展开时再去加载数据，则可以按如下用法。

**限制：懒加载用法目前仅支持自定义表头结构的情况。自定义表头结构可参考：https://visactor.io/vtable/guide/table_type/Pivot_table/custom_header**

实现懒加载重要的两个工作点有：

1. 组织好`rowTree`和`columnTree`, 如果需要懒加载，则`children`属性值为`true`，否则为数组子节点。

如下：

```javascript
rowTree: [
  {
    dimensionKey: 'region',
    value: '中南',
    children: true
  },
  {
    dimensionKey: 'region',
    value: '华东',
    children: true
  }
];
```

2. 在`tree_hierarchy_state_change`事件回调中，根据当前展开节点，请求数据，并通过接口`setTreeNodeChildren`设置到当前的`rowTree`中对应节点的的`children`属性上, 以及把指标数据 records 增加到 table 中。

```javascript
tableInstance.on(tree_hierarchy_state_change, args => {
  if (args.hierarchyState === VTable.TYPES.HierarchyState.expand && args.originData.children === true) {
    tableInstance.setTreeNodeChildren(newChildren, newData, args.col, args.row);
  }
});
```

具体 demo 可参考： https://visactor.io/vtable/demo/table-type/pivot-table-tree-lazy-load

## 多层树结构配置代码示例

透视表常见需求是一层树形结构就可以搞定，但某些特殊业务想要多层级结构来展示数据，如期望可以看到不同类别下不同区域的销售情况。

关键配置项：

```
    extensionRows: [
      //扩展的行表头维度组，因为可能扩展多个所以这里是个数组形式
      {
        rows: [
          {
            dimensionKey: 'region',
            title: 'region',
            headerStyle: { color: 'red', textStick: true },
            width: '200'
          },
          { dimensionKey: 'province', title: 'province', headerStyle: { color: 'purple' }, width: 300 }
        ],
        rowTree: [
          {
            dimensionKey: 'region',
            value: '东北',
            children: [
              { dimensionKey: 'province', value: '黑龙江' },
              { dimensionKey: 'province', value: '吉林' }
            ]
          },
          {
            dimensionKey: 'region',
            value: '华北',
            children: [{ dimensionKey: 'province', value: '河北' }]
          }
        ]
      },
      {
        rows: [
          { dimensionKey: 'year', title: 'year', headerStyle: { color: 'pink' }, width: 'auto' },
          'quarter'
        ],
        rowTree(args) {
          if (args[1]?.value === '黑龙江') {
            return [
              {
                dimensionKey: 'year',
                value: '2019',
                children: [
                  { dimensionKey: 'quarter', value: '2019Q2' },
                  { dimensionKey: 'quarter', value: '2019Q3' }
                ]
              }
            ];
          }
          return [
            {
              dimensionKey: 'year',
              value: '2018',
              children: [
                { dimensionKey: 'quarter', value: '2018Q1' },
                { dimensionKey: 'quarter', value: '2018Q2' }
              ]
            }
          ];
        }
      }
    ],
```

呈现结果如下图：

![image](https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/guide/multi-tree.jpeg)

本教程到此结束，希望能帮助您更好地掌握透视表树形结构展功能的使用方法！
