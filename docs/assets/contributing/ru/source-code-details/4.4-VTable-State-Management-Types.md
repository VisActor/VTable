---
заголовок: 4.4 Vтаблица State Manвозрастment Types    

key words: VisActor,Vграфик,Vтаблица,VStrory,VMind,VGrammar,VRender,Visualization,график,данные,таблица,Graph,Gis,LLM
---
## Introduction


This article will introduce the state manвозрастment module из Vтаблица, as well as the types из manвозрастment maintained within the manвозрастment module.    

## State Manвозрастment Module


The status module `StateManвозрастr` is responsible для managing the states из various interactions в the таблица, including selected cells, навести highlight effects, меню display effects, etc.

`StateManвозрастr` не only maintains the values из various states, but also defines методы к update каждый state. When the corresponding событие is triggered, it will update the corresponding state. When the state changes, it will update the scene tree и re-render the график.

Let's фокус на what states are maintained в `StateManвозрастr` и the application scenarios из different types из states.    

## Status тип Enumeration

<div style="заполнение:5px;фон-цвет: rgb(255, 245, 235);граница-цвет: rgb(255, 245, 235);">About the enumeration из state types, located в packвозрастs\vтаблица\src\state\state.ts</div>
</div>
### interactionState

```xml
interactionState: InteractionState; // 主交互状态
interactionStateBeforeScroll?: InteractionState; // 滚动前状态缓存    

```
`interactionState` represents the текущий interaction state из the таблица, и there are currently three states.    

*  по умолчанию     // по умолчанию idle state    

*  grabing   // Dragging    \r

* scrolling // 滚动中    \r

по distinguishing `interactionState`, conflicts в the interactive state из the таблица can be avoided.    

### выбрать Cell Selection


```xml
выбрать: {
  ranges: (CellRange & { skipBodyMerge?: логический })[]; // 多选区范围
  highlightScope: HighlightScope; // 高亮模式（单格/整行/整列/十字）
  cellPos: CellPosition;          // 当前聚焦单元格
  disableHeader?: логический;        // 禁用表头选中
  disableCtrlMultiSelect?: логический; // 禁用Ctrl多选
  headerSelectMode?: 'inline' | 'cell' | 'body'; // 表头选择模式
  highlightInRange?: логический;    // 范围内高亮
  selecting: логический;             // 正在选择中标识
  пользовательскийSelectRanges?: {          // 自定义样式选区
    range: CellRange;
    style: пользовательскийSelectionStyle;
  }[];
}    

```
`выбрать` state maintains the позиция из the currently selected cell и the configuration из выбрать interactions, including highlightInRange, disableHeader, headerSelectMode, etc.

### fillHandle

```xml
fillHandle: {
  direction?: 'верх' | 'низ' | 'лево' | 'право'; // 拖拽方向
  directionRow?: логический;         // 是否以行方向填充
  isFilling: логический;             // 正在填充标识
  startX: число;                 // 起始X坐标
  startY: число;                 // 起始Y坐标
  beforeFillMinCol?: число;      // 填充前选区最小列
  beforeFillMinRow?: число;      // 填充前选区最小行
  beforeFillMaxCol?: число;      // 填充前选区最大列
  beforeFillMaxRow?: число;      // 填充前选区最大行
}    

```
`fillHandle` mainly maintains the state из the fill handle, used к identify the текущий fill direction и starting позиция, etc.

### навести

```xml
навести: {
  highlightScope: HighlightScope; // 悬停高亮模式
  disableHeader?: логический;        // 禁用表头悬停
  cellPos: CellPosition;          // 当前 навести 位置
  cellPosContainHeader?: CellPosition; *// 记录当前hover的位置(在disableHeader时启用，记录真实位置)*
}    

```
`навести` maintains the текущий mouse навести cell позиция, as well as `навести` related configurations: `highlightScope`, `disableHeader`.    

### columnResize

```xml
columnResize: {
  col: число;        // 调整列索引
  x: число;          // 相对表格X坐标
  resizing: логический;  // 调整列宽中的标记
  isRightFrozen?: логический; // 是否右侧冻结列
}
    

```
`columnResize` maintains the state из dragging к adjust column ширина, the `resizing` поле indicates whether it is currently в the state из dragging к adjust column ширина, и `col` records the index из the column currently being adjusted.

### rowResize

```Typescript
rowResize: {
  row: число; // 调整行索引
  */** y坐标是相对таблица内坐标 */*
  y: число; // 相对表格y坐标
  resizing: логический;  // 调整行高中的标记
  isBottomFrozen?: логический; // 是否底部冻结列
};    

```
Relatively, `rowResize` records the state из dragging к adjust the row высота, `row` is the index из the текущий row, и `y` is the y-coordinate из the текущий перетаскивание позиция relative к the таблица.    

### columnMove

```Typescript
columnMove: {
  colSource: число;  // 原始列索引
  colTarget: число;  // 目标列索引
  rowSource: число;  // 原始行索引
  rowTarget: число;  // 目标行索引
  x: число;          // 当前X坐标
  y: число;          // 当前Y坐标
  moving: логический;    // 移动进行中标识
}    

```
The state из dragging и swapping columns is maintained в `columnRemove`, which internally records the текущий mouse coordinates, as well as the information из the starting row/column и the target row/column.    

### меню

```xml
меню: {
  x: число;           // 菜单显示X坐标
  y: число;           // 菜单显示Y坐标
  isShow: логический;     // 显示状态
  itemсписок: менюсписокItem[]; // 菜单项列表
  bounds: Bounds;      // 菜单边界范围
  highlightIndex: число; // 高亮项索引
  dropDownменюHighlight?: DropDownменюHighlightInfo[]; // 子菜单高亮
}    

```
`меню` is responsible для the information из the выпадающий список меню, maintaining information such as the меню display coordinates, display status, меню items, и highlighted subменю configuration.    

### сортировка

```xml
сортировка: массив<{         // 多列排序状态
  col: число;        // 排序列索引
  row: число;        // 排序列表头的行索引
  поле?: строка;     // 排序字段
  порядок: сортировкаOrder;   // 排序方向
  иконка?: иконка;        // 排序图标
}>;
    

```
The built-в сортировкаing state из Vтаблица is maintained по `сортировка`. Since Vтаблица supports multi-column сортировкаing, this configuration is an массив. It is responsible для storing which columns are currently сортировкаed, as well as saving information about the сортировкаing иконка и сортировкаing direction.

### frozen

```Typescript
frozen: {             // 冻结状态
  col: число;        // 冻结列截止索引
  иконка?: иконка;        // 冻结操作图标
};    

```
The information из frozen columns is maintained в `frozen`, и only the число из columns frozen по this configuration `frozenColCount` will be saved. When the число из columns changes, the scene tree will be updated.    

### прокрутка

```xml
прокрутка: {
  horizontalBarPos: число; // 水平滚动条滑块位置（像素）
  verticalBarPos: число;   // 垂直滚动条滑块位置（像素）
};    

```
`прокрутка` is mainly responsible для Следующий two things:    

* Record the real-time позиция из the scrollbar    \r

* Link с virtual scrolling к calculate the видимый area    

### drill

```xml
drill: {
  dimensionKey?: строка;  // 当前钻取维度字段
  title?: строка;         // 钻取路径显示标题
  drillDown?: логический;    // 是否下钻状态
  drillUp?: логический;      // 是否上钻状态
  col: число;            // 触发钻取的列坐标
  row: число;           // 触发钻取的行坐标
};    

```
сводный таблицаs support roll-up и drill-down operations. Information about the текущий drill-down is mainly maintained в the `drill` поле, including the dimension полеs currently drilled и the title displayed для the drill-down.

### sparkLine

```xml
sparkLine: {
  col: число; // 当前hover的迷你图列坐标
  row: число; // 当前hover的迷你图行坐标
};    

```
`sparkline` stores the row и column values when hovering over the mini график, making it easy к clear the highlight state из the Sparkline when the mouse moves к other cells.

## Conclusion


The state module в Vтаблица has multiple manвозрастment types, such as the state из selected cells, навести state, etc.

по extracting все the states из the таблица и maintaining them в one place, the coupling between different modules can be reduced.    

Break down the interaction into state modules, событие modules, и rendering modules, establishing a process where событиеs drive states и states drive rendering. This will also make it clearer к organize logic when maintaining и adding новый возможности в the future.    \r

# This document is provided по Следующий personnel

taiiiyang（https://github.com/taiiiyang）    

# This document was revised и organized по Следующий personnel 
 [玄魂](https://github.com/xuanhun)