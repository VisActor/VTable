---
title: 1.3 Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¦Ğ¸ĞºĞ» VTable    

key words: VisActor,VChart,VTable,VStrory,VMind,VGrammar,VRender,Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ,Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ°,Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ,Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°,Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº,Ğ“Ğ˜Ğ¡,LLM
---
Ğ’ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ³Ğ»Ğ°Ğ²Ğ°Ñ… Ğ¼Ñ‹ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ¸Ğ»Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸ Ğ¸ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ° `@Visactor/VTable`. ĞĞ´Ğ½Ğ°ĞºĞ¾, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†, Ğ½Ğ°Ğ¼ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒÑÑ Ğ² ĞµĞµ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´. Ğ­Ñ‚Ğ° ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¿Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» `@Visactor/VTable` Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²ÑƒÑ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºÑƒ, Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹, Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸ ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ² ĞµĞµ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ĞºĞ¾Ğ´Ğµ, Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ĞµĞ»ÑĞ¼ Ğ»ÑƒÑ‡ÑˆĞµ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ğ¸ Ğ¾ÑĞ²Ğ¾Ğ¸Ñ‚ÑŒ Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» `@Visactor/VTable`.

<div style="Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ:5px;Ñ„Ğ¾Ğ½-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);">Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ ÑÑ‚Ğ¸Ğ¼ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼:    
VTable\packages\VTable\src\ListTable.ts    
VTable\packages\VTable\src\core\BaseTable.ts    
VTable\packages\VTable\src\event\EventTarget.ts    
VTable\packages\VTable\src\PivotTable.ts    
VTbale\packages\VTable\src\scenegraph\scenegraph.ts    
VTable\packages\VTable\src\scenegraph\group-creater\init-scenegraph.ts    
VTable\packages\VTable\src\scenegraph\layout\compute-row-Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°.ts    
VTable\packages\VTable\src\scenegraph\group-creater\progress\proxy.ts    
VTable\packages\VTable\src\scenegraph\group-creater\progress\create-group-Ğ´Ğ»Ñ-Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹-screen.ts    
VTable\packages\VTable\src\scenegraph\component\table-component.ts    
VTable\packages\VTable\src\event\sparkline-event.ts    
VTbale\packages\VTable\src\state\state.ts    
VTable\packages\VTable\src\event\event.ts    
VTable\packages\VTable\src\core\utils\get-custom-merge-cell-func.ts    
</div>
### Pre-Debugging Process


If you are using VSCode, Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ refer Ğº this configuration Ğ¸ enter Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ settings Ğ² the .vscode file Ğº Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ debugging Ğ² VSCode.    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/W8GFbx0zVowIsWxz7wochuywnQb.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

### Application Initialization Mounting Process


Let's take `ListTable` as an example, set a breakpoint Ğ½Ğ° the Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ line Ğ² the `ListTable constructor`. Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ the console, Ğ¸ we successfully enter the constructor Ğ¸Ğ· `ListTable`.

*  VTable\packages\VTable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/RR2obFrwvoFsx1xOFI8cLBi7nUh.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

It can be seen that ListTable inherits Ğ¾Ñ‚ `BaseTable` Ğ¸ supports three different initialization methods. After adapting Ğº different parameters, it directly calls the super method Ğº enter the initialization Ğ¸Ğ· BaseTable.

<div style="Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ:5px;Ñ„Ğ¾Ğ½-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);">The initialization Ğ¸Ğ· PivotTable is generally the same as that Ğ¸Ğ· ListTable. Both enter BaseTable directly after the constructor is compatible Ñ different configurations, but there are Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ differences Ğ² the creation Ğ¸Ğ· graphics Ğ¸ the initialization Ğ¸Ğ· variables.    
</div>
*  VTable\packages\VTable\src\PivotTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/AitAbtl38ozUWcxA8c0cJxXtn0f.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
After entering the constructor Ğ¸Ğ· BaseTable, the super method is called directly, entering the initialization Ğ¸Ğ· EventTarget.    

*  VTable\packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/SKpibhMS4oJPdBxma1Oc4U6rnMb.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Qxqab2Ye7oYeUFxdr51cdmtmnvb.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

The EventTarget class implements the event publish-subscribe mechanism Ğº facilitate event notifications within the entire component.    

*  VTable\packages\VTable\src\event\EventTarget.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/NPrLbvWPfoHqLPxZPNNcyFtkn3f.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Continuing Ñ debugging, we can see that most Ğ¸Ğ· the code Ğ² the BaseTable constructor deals Ñ processing the configurations Ğ² options Ğ¸ placing them into internalProps Ğ¸ the BaseTable instance.    

*  VTable\packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/RN95bhxW4oqKMZxFSzscj8snnth.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

After the data initialization Ğ¸Ğ· options is completed, an EventHandler instance is created. The `EventHandler` class is a more general event handler that can be used Ğº manage event listeners Ğ´Ğ»Ñ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ¸Ğ¿ Ğ¸Ğ· event Ğ½Ğ° Ğ»ÑĞ±Ğ¾Ğ¹ target, making listening more efficient. When no specific event is passed Ğ², it defaults Ğº the Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° event Ğ¸ uses the modified `ResizeObserver` class within VTable Ğº handle the `Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ°` event Ğ¿Ğ¾ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ.

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CwCbbD8LDoHsKix6IszcMKTpnDe.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
After completing the initialization Ğ¸Ğ· the handler, the ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ core part is the creation Ğ¸ mounting Ğ¸Ğ· the element. Internally, it checks whether an element has been passed through options. If Ğ½Ğµ, it creates the element using createRootElement Ğ¸ appends it Ğº the container, completing the Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ mounting Ğ¸Ğ· the element.


<div style="Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ:5px;Ñ„Ğ¾Ğ½-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);">createRootElement just creates a basic div element based Ğ½Ğ° the Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ passed Ğ².    
</div>
*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/VNJqbiy6Po7kvVx9vcJcZBBEnQf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='840' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/RM8ubF5Jto1SCjxa6ldctmp2nCf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='531' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

After completing the mounting Ğ¸Ğ· the element, the scenegraph, stateManager, Ğ¸ eventManager are initialized immediately, which are the scene tree, state management, Ğ¸ interaction event management, respectively.    

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/X8C3byrUvownnmxmxCZcBp1xnmg.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='479' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/P3W9wMV0Zh8BxybTUSWctg6unKd.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='771' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

ç»§ç»­æ·±å…¥ scenegraph ç±»çš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å†…éƒ¨ä½¿ç”¨äº† VRender çš„ createStage æ–¹æ³•åˆ›å»º Stageã€‚åœ¨ Stage åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼ å…¥äº† afterRender å›è°ƒå‡½æ•°ï¼Œè¿™æ ·åœ¨ Stage æ¸²æŸ“å®Œæˆåï¼Œå°±ä¼šé€šè¿‡ fireListener è§¦å‘after_render ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œè¿™é‡Œçš„ after_render å°±å¯¹åº”äº†æ–‡æ¡£ä¸­çš„ methods ä¸­çš„ [after_render](https://visactor.io/VTable/api/events#AFTER_RENDER) å›è°ƒã€‚    

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CQUjb8PzLoWPpfxCDA3cw4COnUf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/DXaybRZcsouFzixTn0YcuwZGn4e.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
After the Stage is initialized, it is time Ğ´Ğ»Ñ the initialization Ğ¸Ğ· the scene tree, elements, Ğ¸ the creation Ğ¸Ğ· components outside the table.    \r

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/OSdWbSpw1o3jM0xasmhcLWlbnNc.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UiribvA8ioCPxfxvqkLc8uianKa.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

<div style="Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ:5px;Ñ„Ğ¾Ğ½-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);">å…³äº VRender Stage çš„ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  [ğŸ VisActor Data Visualization Competition](https://visactor.io/vrender/guide/asd/Basic_Tutorial/Create_Instance)ï¼Œç®€å•æ¥è¯´ï¼Œåœºæ™¯æ ‘å°±æ˜¯é€šè¿‡Stageè¿›è¡Œç®¡ç†ã€‚    
</div>
Returning Ğ¾Ñ‚ SceneGraph Ğº BaseTable, we can see that legends, Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°, menu, dropDownMenuHighlight, Ğ¸ other features are initialized ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹, Ğ¸ finally, the Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¸Ğ· the Canvas is readjusted. Ğ² this point, the internal initialization Ğ¸Ğ· BaseTable is complete.    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UcaXbbVX2oHgJ3xDCwpcgsoWnOg.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
Returning Ğº ListTable, we can see the initialization Ğ¸Ğ· dataSource as well as the Title Ğ¸ EmptyTip components.    

*  packages\VTable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/JMqebq6KZoPPBux8M2xcLRVcnFc.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Pay attention Ğº this part Ğ¸Ğ· the logic Ğ¸Ğ· the dataSource. Ğ´Ğ»Ñ dataSource, VTable internally makes three judgments, analyzed Ğ¾Ñ‚ Ğ²ĞµÑ€Ñ… Ğº Ğ½Ğ¸Ğ·:    \r

*  packages\VTable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/DrcqbfCyRo2ZcsxjKr4cyRfonSe.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='965' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

1. Pass dataSource directly Ğ² Options    \r

ç›´æ¥ä¼ å…¥dataSourceï¼Œä¸€èˆ¬åœ¨[å¼‚æ­¥æ‡’åŠ è½½æ•°æ®](https://visactor.io/VTable/guide/data/async_data)çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚VTable ä¼šç›´æ¥æ”¹å˜å®ä¾‹ä¸Šçš„ dataSourceï¼Œç”±äº BaseTable å†…éƒ¨å¯¹ datasource è¿›è¡Œäº†ä»£ç†ï¼Œè¿™ä¸ªæ“ä½œå°†ä¼šè§¦å‘ createSceneGraph å’Œ render æ–¹æ³•ï¼›BaseTable ä¸Šçš„ render æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨ Stage ä¸Šçš„ render æ–¹æ³•ï¼Œå°† canvas ç»˜åˆ¶åˆ°æŒ‡å®šå…ƒç´ ã€‚    

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/V7AfbFnXloVP4dxhfnTcXX97nhe.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

1. Neither records nor dataSource Ğ¸ records are provided Ğ² Options


Ğ² both cases, setRecords is called. Ğ² setRecords, we see two familiar methods, createSceneGraph Ğ¸ render. Ğ² this logical judgment, the rendering Ğ¸Ğ· the table is completed.    \r

*  packages\VTable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/GpQ7b4OMNoP98Exn7tKcLiT5nEc.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
After analyzing the general processing flow Ğ¸Ğ· dataSource, let's go back Ğ¸ see what createSceneGraph does internally:    \r

1. It can be seen that special handling is done internally Ğ´Ğ»Ñ the pivot table, Ğ¸ a SceneProxy is instantiated. The `proxy.ts` file defines a `SceneProxy` class, which is responsible Ğ´Ğ»Ñ calculating the maximum Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¸Ğ· rows Ğ¸ columns Ğ² the scene tree, progressive Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ· the scene tree, Ğ¸ creating the Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ screen group, among other logic.    

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UXcFb3zvfo18RKxRDCFckqVHnZc.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

1. After the proxy instance is initialized, the `createGroupForFirstScreen` method is called. The `createGroupForFirstScreen` Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ is mainly used Ğº initialize the **Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ screen rendering area Ğ¸Ğ· the Canvas table**. It is responsible Ğ´Ğ»Ñ calculating the Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¸Ğ· rows Ğ¸ columns needed Ğ´Ğ»Ñ the Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ screen, constructing the header, freezing rows Ğ¸ columns, filling core drawing units (Groups) such as the main area, creating Ğ¸ adjusting the styles Ğ¸Ğ· cell elements, dynamically calculating row Ğ¸ column sizes, handling the layout Ğ¸Ğ· frozen areas according Ğº configuration, Ğ¸ implementing block rendering strategies, achieving high-performance initial rendering.    

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UsM0brFm4omOHexxWyqcDQrGndc.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='700' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\scenegraph\group-creater\progress\create-group-Ğ´Ğ»Ñ-Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹-screen.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/DqH9bfBibo3iVhxWOHIc32vSnHE.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\scenegraph\group-creater\progress\create-group-Ğ´Ğ»Ñ-Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹-screen.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Eym7bijCdoCMz1xtyKTcDdeEnHd.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='879' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/XH0zbfQhloobUQxC7v5coALanhc.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

1. After completing the creation Ğ¸Ğ· the Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ screen group, afterScenegraphCreated is called Ğº automatically adjust the row Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¸ column ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°, completing the adjustment Ğ¸Ğ· the scene graph Ğ´Ğ»Ñ the render method.    

*  packages\VTable\src\scenegraph\group-creater\progress\create-group-Ğ´Ğ»Ñ-Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹-screen.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/YC5abzMZIorJBjxpefIcXP9knah.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='846' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
After completing the rendering Ğ¸Ğ· the table Ğ¸ the initialization Ğ¸Ğ· ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ component, trigger the INITIALIZED Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² through fireListeners Ğ² the Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ row Ğ¸Ğ· ListTable Ğº complete the final step Ğ¸Ğ· the lifecycle, thus completing the initialization.    

*  packages\VTable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/NzqGbDR0wowsMXxnnF8cysySnkf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  General flowchart    

![](https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/MtUYwkfgehXJOmbBNdhct1fknMh.gif)

### Update Process


VTable æä¾›äº†äº”ç§æ–¹æ³•ç”¨äºæ›´æ–°é…ç½®ï¼Œæœ¬æ¬¡æˆ‘ä»¬ä»æœ€å¸¸ç”¨çš„ [updateOption](https://visactor.io/VTable/api/Methods#updateOption) æ–¹æ³•åˆ‡å…¥ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/E4BJbIjOuoYfMex4hTDcwGA0nIb.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='383' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Through breakpoint analysis, it was found that the updateOption method Ğ¸Ğ· the parent class BaseTable Ğ¸Ğ· ListTable was directly called Ğ² the beginning.    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Ms9YbMRMfo1EqbxIN1mc0znnnkd.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='674' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Enter BaseTable, Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ extract the common attributes Ğ¸Ğ· tables `ListTable` Ğ¸ `PivotTable` Ğ¾Ñ‚ options, then update the pixel ratio Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ. ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹, update various attributes, including `widthMode`, `heightMode`, etc.

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/PBvObXtlBoEMzfxB8BXciyVnn1c.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

It will also clear configurations such as row Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¸ column ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°.    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/VgktbCIPBoezGrx44BYcVi6jnAh.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Adjust theme Ğ¸ Icon configuration.    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/MG9IbtcJ5o49q7x6Bd8cS59inXj.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Adjust the Ñ„Ğ¾Ğ½ Ñ†Ğ²ĞµÑ‚.    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Gkl4bDF9UoBzoKxG0JncCC1ZnSh.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='762' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Release the ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ title, legend, emptyTip, Ğ¸ layoutMap instances, while calling `sceneGraph.clearCells` Ğº clear the cells.    

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CrR8bKRGyoWnUixnBh4cxIYgnne.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='533' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/HAvEbOjZmoEdudx8f1ZcACz6nnh.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='554' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

According Ğº the Ğ½Ğ¾Ğ²Ñ‹Ğ¹ configuration, calling `updateComponent`, `updateComponent` internally will call `scenegraph.updateComponent`, Ğ¸ Ğ² scenegraph, it continues Ğº call `updateStyle` Ğº update the styles Ğ¸Ğ· components outside the table. This update includes scrollbars, Ğ¿ĞµÑ€ĞµÑ‚Ğ°ÑĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ reference lines, Ğ¸ frozen column shadows, etc.

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Il93br7msob846xrCh2c9iacnKg.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='521' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Gje5bgINnoyTMAxbsfKcWZmfng6.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='340' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages/VTable/src/scenegraph/component/table-component.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/EdtXbzZcGo2a4Mxo9kHc3wbSngg.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

After updating the external component styles, call updateOptionSetState Ğº refresh the configuration Ğ² the State, including highlight mode, frozen column status, Ğ½Ğ°Ğ²ĞµÑÑ‚Ğ¸ Ğ¸ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ status.    

*  packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/NEMnbIktooOlYgxAGaZcUECmnVb.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='627' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\state\state.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/GJiFb62pUoOq3jxWLNDcQdJNnJe.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='741' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Then recalculate the ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ° Ğ¸ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¸Ğ· the `canvas` through `this._updateSize`. Then call `this.eventManager.updateEventBinder` Ğº update the binding Ğ¸Ğ· Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚ĞºĞ° events Ğ¸ Ñ‚ĞµĞºÑÑ‚ adhesion.


*  packages\VTable\src\event\event.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/MZIUbSxteoxDDZx9tnpcvhWMncf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='938' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Inside `updateEventBinder`, it will also update the Ğ½Ğ°Ğ²ĞµÑÑ‚Ğ¸ event state Ğ´Ğ»Ñ the bound mini-map Ñ‚Ğ¸Ğ¿.    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/OAGMbAZK4o40TJxSHOvcuFtwnyd.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='499' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\event\sparkline-event.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/B2Bhbt6eKo4juUxHOBOcv2bOn3m.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

---
ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹, update the configurations Ğ´Ğ»Ñ legend, Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°, Ğ²Ñ‹Ğ¿Ğ°Ğ´Ğ°ÑÑ‰Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº menu, etc. Ğ² sequence;    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/ObF7bZOD9o5xWhxYhQXcJ04zntU.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='851' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Clear cell styles, column ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°, Ğ¸ row Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° cache;    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/PA6YbELhhomnZMxhdiHcVhInn4b.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='610' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

æ›´æ–°è‡ªå®šä¹‰å•å…ƒæ ¼åˆå¹¶è§„åˆ™ï¼ˆ[customMergeCell](https://visactor.io/VTable/option/ListTable#customMergeCell)ï¼‰    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/M2BbbCMQHoM5GpxGmLlcnLz1nCf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='840' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  packages\VTable\src\core\utils\get-custom-merge-cell-func.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Pl6HbKPAjoRgNCxHHXkcUrqYnef.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='998' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Finally, Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° the canvas. Ğ² this point, the updateOption inside BaseTable is complete, returning Ğº the inside Ğ¸Ğ· ListTable;

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Fp9abgIxzoWqOkx4n1vcl20en9T.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='588' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹, the pagination configuration, sortState, dataConfig, showHeader, Ğ¸ columns configuration were updated;    \r

*  packages\VTable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/WeAGbLDuDoqjDCxH2wgciQ0gnFM.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='901' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Then use `generateAggregationForColumn` Ğº update the aggregation configuration Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ column;    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/BG2Gb9iNuoOyZdx3Q8JcOXJXn7b.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='603' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Handle transposition, call `refreshHeader` Ğº update the header, update column ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ° configuration;    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/SpZWbrRPgo4sIWxjdKXcSd54ndd.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='841' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Clear `releaseList`;    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/YXnqboICFo700lx7XVZc2gX3n5c.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='906' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Adjusting the dataSource, Ğ¸Ğ»Ğ¸ calling setRecords, Ğ¸Ğ»Ğ¸ directly calling the render method, as mentioned earlier, Ğ²ÑĞµ three methods can directly trigger table rendering. Ğ¿Ğ¾ this time, the table update is basically complete.    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/QQiHbD2PDow9jMxVXC6c47NfnSD.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='824' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

After updating the data source, the `title` Ğ¸ `emptyTip` instances were regenerated. It should be noted that the ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ `title` Ğ¸ `emptyTip` were already released during the updateOption process Ğ² BaseTable;

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Bz6Pbtd6noUJ1sxLwGbc6ZzHnae.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='929' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Due Ğº the asynchronous rendering operations contained internally, VTable ensures that the table component rendering is completed when await updateOption Ğ¿Ğ¾ returning a Promise Ğ² the ĞºĞ¾Ğ½ĞµÑ† Ğ¸Ğ· updateOption. Ğ² this point, the full update Ğ¸Ğ· VTable is complete.    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/XxcDbN0VRocTaJxQI7vcm9jdnXe.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='706' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

*  General flowchart    

![](https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CfZow5lBdhVkpsb63MCcf2hGnke.gif)

### Destruction Process


Understanding the update mechanism is key Ğº maintaining data, Ğ¸ complete lifecycle management also requires a standardized destruction process. When tables are no longer needed, they should be proactively released through the destruction process Ğº avoid memory leaks Ğ¸ resource waste.

VTable å®ä¾‹æä¾›äº† [release](https://visactor.io/VTable/api/Methods#release) æ–¹æ³•ç”¨äºé”€æ¯è¡¨æ ¼äº‹ä¾‹ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/GG58bIa2Jof3EWxESDJcwI0qnHd.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='1000' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Ğ¿Ğ¾ searching Ğ² the file, it can be found that release is defined Ğ² the BaseTable class. Ğ² the beginning, it checks whether it is Ğ² the process Ğ¸Ğ· being destroyed through the isReleased field Ğº avoid repeated unloading Ğ¸Ğ· instances. The ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ three lines Ğ¸Ğ· code respectively destroy the tooltipHandler Ğ¸ menuHandler instances.    

*  VTable\packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/L8kvbAWFjo4rB5x1bvUcxYrtnCg.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='568' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Then the release method Ğ¸Ğ· the parent class is called. As mentioned above, BaseTable inherits Ğ¾Ñ‚ EventTarget, so essentially it calls `EventTarget.release` Ğº release Ğ²ÑĞµ subscribed events.

*  VTable\packages\VTable\src\event\EventTarget.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/R89hbhvLvokiPFx2WnpchywenHh.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='601' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

Subsequently, release the EventHandler instance, eventManager, focusControl, legends, title, emptyTip, layoutMap, stage, Ğ¸ proxy Ğ² sequence. After completing the release, call parentElement.removeChild Ğº remove the mounted DOM element.    \r

<div style="Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ:5px;Ñ„Ğ¾Ğ½-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°-Ñ†Ğ²ĞµÑ‚: rgb(255, 245, 235);">The Stage.release method is located within VRender, primarily used Ğº destroy the entire Stage Ğ¸ clear the chart. Ğ² this step, the chart content has already disappeared.    
</div>
*  VTable\packages\VTable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/W7Xbb6aqvo8nQ5xJZtCcN4Ydnuf.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='850' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

After releasing the above components, update the isReleased status Ğº avoid repeated release operations; clear the scene tree Ğ¸ internalProps. This completes the entire destruction process Ğ¸Ğ· the table component.    \r

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/JDmHbyk2joDSP5xt0bYcDUi2nmD.gif' alt='' ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°='661' Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°='auto'>

### Summary


#### 1. Initialization Process

**Core Process**    

*  **Entry**: `ListTable`/`PivotTable` constructor inherits `BaseTable`, processes configuration parameters, Ğ¸ then calls `super()` Ğº enter parent class initialization.    

*  **Event Initialization**: `BaseTable` inherits `EventTarget` Ğº implement an event subscription mechanism, supporting events like `Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ°`.    

*  **DOM Mounting**: Create a root element `div` Ğ¸ mount it Ğº the container, serving as the container Ğ´Ğ»Ñ table rendering.    

*  **Scene Graph Construction**: Create `VRender Stage` through the `scenegraph` module Ğº manage the rendering tree Ğ¸ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹-screen rendering logic.    

* Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ screen rendering: `createGroupForFirstScreen` creates the header, freezes rows Ğ¸ columns, main area elements, Ğ¸ dynamically calculates row Ğ¸ column dimensions.

*  Proxy rendering: `SceneProxy` manages progressive rendering strategies Ğº optimize performance.    

*  **Data Source Processing**: Trigger `createSceneGraph` Ğ¸ `render` based Ğ½Ğ° `dataSource` Ğ¸Ğ»Ğ¸ `records` Ğº complete the initial rendering.    

*  **Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² Trigger**: Trigger the `INITIALIZED` event through `fireListeners`, marking the completion Ğ¸Ğ· initialization.    

**Key Document**    

*  `ListTable.ts`/`PivotTable.ts`: Entry class, handles table Ñ‚Ğ¸Ğ¿ differences.    

* `BaseTable.ts`: Core configuration processing, DOM mounting, scene graph/state/event manager initialization.    

*  `scenegraph.ts`: Scene tree management, interacts Ñ `VRender`.    

*  `create-group-Ğ´Ğ»Ñ-Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹-screen.ts`: Implementation Ğ¸Ğ· the Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ screen rendering logic.    

---
#### 2. Update Process


**Core Process**    

*  **Entry Method**: `updateOption` triggers a full update.    

*  **Configuration Update**:    

* Update general properties (theme, Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ mode, Ñ„Ğ¾Ğ½, etc.).    \r

*  Clear cache (row Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°, column ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°, cell style).    \r

*  Release ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ components (title, legend, layout mapping).    

*  **Scene Reconstruction**:    

*  Call `sceneGraph.clearCells` Ğº clear cells.    

*  Recreate components (scrollbars, freeze shadows) Ğ¸ update styles.    \r

*  **State Synchronization**: Update interaction states such as highlight, selection, Ğ¸ freeze.    \r

*  **Asynchronous Rendering**: Ensure rendering completion Ñ `Promise`, supports `await` synchronization.    

**Key Document**    

*  `BaseTable.ts`: Configuration update main logic.    

* `state.ts`: State management module.    

*  `sparkline-event.ts`: Sparkline event handling.    

---
#### 3. Destruction Process

**Core Process**    

*  **Entry Method**: `release()`    

*  **Resource Release**:    

* Remove event listeners: Unsubscribe Ğ²ÑĞµ Ğ¿Ğ¾ using `EventTarget.release()`.    

* Destroy DOM elements: remove the root node Ğ¸ Canvas.    

* Clean up components: Release instances Ğ¸Ğ· `Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°`, `Menu`, etc.    

*  **Memory Reclamation**: Clear the scene tree, data references, trigger GC.    \r

**Key Design**    

* Defensive judgment: Avoid repeated destruction Ğ¿Ğ¾ using the `isReleased` flag.    

* Hierarchical release: Clean up step Ğ¿Ğ¾ step Ğ¾Ñ‚ child components Ğº parent class Ğº ensure no residual references.    \r

**Key Document**    

*  `BaseTable.ts`: Implementation Ğ¸Ğ· the `release()` method.    

*  `EventTarget.ts`: Event system destruction logic.    

# This document is provided Ğ¿Ğ¾ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ personnel


taiiiyangï¼ˆhttps://github.com/taiiiyangï¼‰    



# This document was revised Ğ¸ organized Ğ¿Ğ¾ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ personnel 
 [ç„é­‚](https://github.com/xuanhun)