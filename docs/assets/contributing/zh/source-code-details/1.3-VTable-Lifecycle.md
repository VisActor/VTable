---
title: 1.3  VTable ç”Ÿå‘½å‘¨æœŸ    

key words: VisActor,VChart,VTable,VStrory,VMind,VGrammar,VRender,Visualization,Chart,Data,Table,Graph,Gis,LLM
---
åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†`@Visactor/VTable`çš„åŸºæœ¬æ¦‚å¿µä¸æºç æ¶æ„ï¼Œç„¶è€Œï¼Œè¦æ·±å…¥ç†è§£è¡¨æ ¼ç»„ä»¶åº“çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥ç ”ç©¶å…¶æºç ã€‚æœ¬æ–‡å°†é€šè¿‡å•æ­¥è°ƒè¯•çš„æ–¹æ³•ï¼Œé€æ­¥ä»‹ç»`@Visactor/VTable`çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ·±å…¥è§£æå…¶æºç ä¸­çš„è¡¨æ ¼æ¸²æŸ“åˆå§‹åŒ–ã€æ›´æ–°å’Œé”€æ¯æµç¨‹ï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡`@Visactor/VTable`çš„ç”Ÿå‘½å‘¨æœŸã€‚    

<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">æœ¬æ–‡æ¶‰åŠåˆ°çš„æ–‡ä»¶ä½ç½®ï¼š    
VTable\packages\vtable\src\ListTable.ts    
VTable\packages\vtable\src\core\BaseTable.ts    
VTable\packages\vtable\src\event\EventTarget.ts    
VTable\packages\vtable\src\PivotTable.ts    
VTbale\packages\vtable\src\scenegraph\scenegraph.ts    
VTable\packages\vtable\src\scenegraph\group-creater\init-scenegraph.ts    
VTable\packages\vtable\src\scenegraph\layout\compute-row-height.ts    
VTable\packages\vtable\src\scenegraph\group-creater\progress\proxy.ts    
VTable\packages\vtable\src\scenegraph\group-creater\progress\create-group-for-first-screen.ts    
VTable\packages\vtable\src\scenegraph\component\table-component.ts    
VTable\packages\vtable\src\event\sparkline-event.ts    
VTbale\packages\vtable\src\state\state.ts    
VTable\packages\vtable\src\event\event.ts    
VTable\packages\vtable\src\core\utils\get-custom-merge-cell-func.ts    
</div>
### è°ƒè¯•å‰ç½®æµç¨‹

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ VSCode ï¼Œé‚£ä¹ˆå¯ä»¥å‚ç…§è¯¥é…ç½®ï¼Œåœ¨ .vscode æ–‡ä»¶ä¸­å¡«å…¥ä¸‹é¢çš„é…ç½®ï¼Œä¾¿å¯ä»¥å®ç°åœ¨ VSCode ä¸­è¿›è¡Œè°ƒè¯•ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/W8GFbx0zVowIsWxz7wochuywnQb.gif' alt='' width='1000' height='auto'>

### åº”ç”¨ç¨‹åºåˆå§‹åŒ–æŒ‚è½½æµç¨‹

æˆ‘ä»¬ä»¥`ListTable`ä¸ºä¾‹ï¼Œåœ¨ `ListTable constructor` ä¸­çš„ç¬¬ä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹ã€‚æ‰“å¼€æ§åˆ¶å°ï¼Œæˆ‘ä»¬é¡ºåˆ©çš„è¿›å…¥åˆ°äº†`ListTable`çš„æ„é€ å™¨å†…éƒ¨ã€‚    

*  VTable\packages\vtable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/RR2obFrwvoFsx1xOFI8cLBi7nUh.gif' alt='' width='1000' height='auto'>

å¯ä»¥çœ‹åˆ° ListTable ç»§æ‰¿äº†`BaseTable`ï¼Œå¹¶ä¸”æ”¯æŒä¸‰ç§ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼ã€‚åœ¨å¯¹ä¸åŒå…¥å‚è¿›è¡Œé€‚é…åï¼Œç›´æ¥è°ƒç”¨superæ–¹æ³•ï¼Œè¿›å…¥åˆ°BaseTableçš„åˆå§‹åŒ–ã€‚    

<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">PivotTable çš„åˆå§‹åŒ–ä¸ ListTable çš„å¤§ä½“ç›¸åŒï¼Œéƒ½æ˜¯åœ¨ constructor å…¼å®¹ä¸åŒé…ç½®ä¹‹åç›´æ¥è¿›å…¥ BaseTableï¼Œåªæ˜¯åœ¨å›¾å…ƒçš„åˆ›å»ºå’Œå˜é‡åˆå§‹åŒ–æ—¶æœ‰æ‰€å·®å¼‚ã€‚    
</div>
*  VTable\packages\vtable\src\PivotTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/AitAbtl38ozUWcxA8c0cJxXtn0f.gif' alt='' width='1000' height='auto'>

---
åœ¨è¿›å…¥åˆ° BaseTable çš„ constructor åï¼Œç›´æ¥è°ƒç”¨äº†super æ–¹æ³•ï¼Œè¿›å…¥åˆ° EventTarget çš„åˆå§‹åŒ–ã€‚    

*  VTable\packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/SKpibhMS4oJPdBxma1Oc4U6rnMb.gif' alt='' width='1000' height='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Qxqab2Ye7oYeUFxdr51cdmtmnvb.gif' alt='' width='1000' height='auto'>

EventTarget ç±»å®ç°äº†äº‹ä»¶å‘å¸ƒè®¢é˜…çš„æœºåˆ¶ï¼Œä»¥ä¾¿äºåœ¨æ•´ä¸ªç»„ä»¶å†…éƒ¨èƒ½å¤Ÿè¿›è¡Œäº‹ä»¶é€šçŸ¥ã€‚    

*  VTable\packages\vtable\src\event\EventTarget.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/NPrLbvWPfoHqLPxZPNNcyFtkn3f.gif' alt='' width='1000' height='auto'>

ç»§ç»­è¿›è¡Œè°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° BaseTable constructor å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯å¯¹ options ä¸­çš„é…ç½®è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†å…¶æ”¾åˆ° internalProps å’Œ BaseTable å®ä¾‹ä¸­ã€‚    

*  VTable\packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/RN95bhxW4oqKMZxFSzscj8snnth.gif' alt='' width='1000' height='auto'>

åœ¨å¯¹ options çš„æ•°æ®åˆå§‹åŒ–å®Œæˆåï¼Œåˆ›å»ºäº† EventHandler å®ä¾‹ï¼Œ`EventHandler` ç±»æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„äº‹ä»¶å¤„ç†å™¨ï¼Œå¯ç”¨äºç®¡ç†ä»»ä½•ç›®æ ‡ä¸Šä»»ä½•ç±»å‹äº‹ä»¶çš„äº‹ä»¶ç›‘å¬ï¼Œä½¿å¾—ç›‘å¬æ›´åŠ é«˜æ•ˆã€‚åœ¨æ²¡æœ‰ä¼ å…¥æŒ‡å®šäº‹ä»¶çš„æ—¶å€™ï¼Œä¼šæŒ‡å®šä¸º resize äº‹ä»¶å¹¶é»˜è®¤ä½¿ç”¨ VTable å†…éƒ¨ä¿®æ”¹è¿‡çš„ `ResizeObserver` ç±»æ¥å¤„ç† `resize` äº‹ä»¶ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CwCbbD8LDoHsKix6IszcMKTpnDe.gif' alt='' width='1000' height='auto'>

---
åœ¨å®Œæˆ handler çš„åˆå§‹åŒ–åï¼Œæ¥ä¸‹æ¥çš„æ ¸å¿ƒéƒ¨åˆ†å°±æ˜¯ element çš„åˆ›å»ºä¸æŒ‚è½½ï¼Œå†…éƒ¨ä¼šåˆ¤æ–­æœ‰æ²¡æœ‰é€šè¿‡optionsä¼ å…¥elementï¼Œæ²¡æœ‰çš„è¯åˆ™é€šè¿‡ createRootElement åˆ›å»º element å¹¶å°†å…¶ appendChild åˆ° container ä¸­ï¼Œå®Œæˆå…ƒç´ çš„ç¬¬ä¸€æ¬¡æŒ‚è½½ã€‚    

<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">createRootElement åªæ˜¯æ ¹æ®ä¼ å…¥çš„ padding åˆ›å»ºäº†ä¸€ä¸ªæœ€åŸºæœ¬çš„divå…ƒç´ ã€‚    
</div>
*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/VNJqbiy6Po7kvVx9vcJcZBBEnQf.gif' alt='' width='840' height='auto'>

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/RM8ubF5Jto1SCjxa6ldctmp2nCf.gif' alt='' width='531' height='auto'>

å®Œæˆelementçš„æŒ‚è½½ä¹‹åï¼Œç´§æ¥ç€å°±åˆå§‹åŒ–äº† scenegraphã€stateManagerã€eventManagerï¼Œåˆ†åˆ«æ˜¯åœºæ™¯æ ‘ã€çŠ¶æ€ç®¡ç†å’Œäº¤äº’äº‹ä»¶ç®¡ç†ã€‚    

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/X8C3byrUvownnmxmxCZcBp1xnmg.gif' alt='' width='479' height='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/P3W9wMV0Zh8BxybTUSWctg6unKd.gif' alt='' width='771' height='auto'>

ç»§ç»­æ·±å…¥ scenegraph ç±»çš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å†…éƒ¨ä½¿ç”¨äº† VRender çš„ createStage æ–¹æ³•åˆ›å»º Stageã€‚åœ¨ Stage åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼ å…¥äº† afterRender å›è°ƒå‡½æ•°ï¼Œè¿™æ ·åœ¨ Stage æ¸²æŸ“å®Œæˆåï¼Œå°±ä¼šé€šè¿‡ fireListener è§¦å‘after_render ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œè¿™é‡Œçš„ after_render å°±å¯¹åº”äº†æ–‡æ¡£ä¸­çš„ methods ä¸­çš„ [after_render](https://visactor.io/vtable/api/events#AFTER_RENDER) å›è°ƒã€‚    

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CQUjb8PzLoWPpfxCDA3cw4COnUf.gif' alt='' width='1000' height='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/DXaybRZcsouFzixTn0YcuwZGn4e.gif' alt='' width='1000' height='auto'>

---
å½“Stageåˆå§‹åŒ–å®Œæˆåï¼Œå°±æ˜¯åœºæ™¯æ ‘ã€å›¾å…ƒçš„åˆå§‹åŒ–å’Œè¡¨æ ¼å¤–ç»„ä»¶çš„åˆ›å»ºã€‚    

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/OSdWbSpw1o3jM0xasmhcLWlbnNc.gif' alt='' width='1000' height='auto'>

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UiribvA8ioCPxfxvqkLc8uianKa.gif' alt='' width='1000' height='auto'>

<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">å…³äº VRender Stage çš„ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  [ğŸ VisActor Data Visualization Competition](https://visactor.io/vrender/guide/asd/Basic_Tutorial/Create_Instance)ï¼Œç®€å•æ¥è¯´ï¼Œåœºæ™¯æ ‘å°±æ˜¯é€šè¿‡Stageè¿›è¡Œç®¡ç†ã€‚    
</div>
ä» SceneGraph å†å›åˆ° BaseTable ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¥ä¸‹æ¥åˆå§‹åŒ–äº† legendsã€Tooltip ã€menuã€dropDownMenuHighlightç­‰åŠŸèƒ½ï¼Œæœ€åé‡æ–°è°ƒæ•´äº†Canvasçš„å°ºå¯¸ã€‚è‡³æ­¤BaseTableçš„å†…éƒ¨åˆå§‹åŒ–å®Œæˆã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UcaXbbVX2oHgJ3xDCwpcgsoWnOg.gif' alt='' width='1000' height='auto'>

---
å†å›åˆ°ListTableä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ° dataSource ä»¥åŠ Title å’Œ EmptyTip ç»„ä»¶çš„åˆå§‹åŒ–ã€‚    

*  packages\vtable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/JMqebq6KZoPPBux8M2xcLRVcnFc.gif' alt='' width='1000' height='auto'>

æ³¨æ„çœ‹è¿™ä¸ª dataSource çš„è¿™éƒ¨åˆ†é€»è¾‘ï¼Œé’ˆå¯¹dataSourceï¼ŒVTable å†…éƒ¨åšäº†ä¸‰ç§åˆ¤æ–­ï¼Œä»ä¸Šå¾€ä¸‹è¿›è¡Œåˆ†æï¼š    

*  packages\vtable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/DrcqbfCyRo2ZcsxjKr4cyRfonSe.gif' alt='' width='965' height='auto'>

1. Options ä¸­ç›´æ¥ä¼ å…¥ dataSource    

ç›´æ¥ä¼ å…¥dataSourceï¼Œä¸€èˆ¬åœ¨[å¼‚æ­¥æ‡’åŠ è½½æ•°æ®](https://visactor.io/vtable/guide/data/async_data)çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚Vtable ä¼šç›´æ¥æ”¹å˜å®ä¾‹ä¸Šçš„ dataSourceï¼Œç”±äº BaseTable å†…éƒ¨å¯¹ datasource è¿›è¡Œäº†ä»£ç†ï¼Œè¿™ä¸ªæ“ä½œå°†ä¼šè§¦å‘ createSceneGraph å’Œ render æ–¹æ³•ï¼›BaseTable ä¸Šçš„ render æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨ Stage ä¸Šçš„ render æ–¹æ³•ï¼Œå°† canvas ç»˜åˆ¶åˆ°æŒ‡å®šå…ƒç´ ã€‚    

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/V7AfbFnXloVP4dxhfnTcXX97nhe.gif' alt='' width='1000' height='auto'>

1. Options ä¸­ä¼ å…¥ records æˆ–è€… dataSource å’Œ records ä¸¤è€…éƒ½æ²¡æœ‰    

è¿™ä¸¤ç§æƒ…å†µéƒ½ä¼šè°ƒç”¨setRecordsï¼Œåœ¨ setRecords ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ç†Ÿæ‚‰çš„2ä¸ªæ–¹æ³•ï¼ŒcreateSceneGraph å’Œ render æ–¹æ³•ï¼Œåœ¨è¿™æ¡é€»è¾‘åˆ¤æ–­ä¸­ï¼Œå®Œæˆäº†è¡¨æ ¼çš„æ¸²æŸ“    

*  packages\vtable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/GpQ7b4OMNoP98Exn7tKcLiT5nEc.gif' alt='' width='1000' height='auto'>

---
åœ¨åˆ†æå®Œ dataSource çš„å¤§è‡´å¤„ç†æµç¨‹åï¼Œæˆ‘ä»¬å›å¤´æ¥çœ‹ä¸‹ createSceneGraph å†…éƒ¨åšäº†ä»€ä¹ˆï¼š    

1. å¯ä»¥çœ‹åˆ°åœ¨å†…éƒ¨é’ˆå¯¹é€è§†è¡¨åšäº†ç‰¹æ®Šå¤„ç†ï¼ŒåŒæ—¶å®ä¾‹åŒ–äº† SceneProxy ï¼Œ`proxy.ts` æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ª `SceneProxy` ç±»ï¼Œè¯¥æ¨¡å—è´Ÿè´£åˆå§‹åŒ–åœºæ™¯æ ‘æœ€å¤§è¡Œåˆ—æ•°çš„è®¡ç®—ã€åœºæ™¯æ ‘çš„æ¸è¿›åŠ è½½ã€é¦–å±åˆ†ç»„åˆ›å»ºç­‰é€»è¾‘ã€‚    

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UXcFb3zvfo18RKxRDCFckqVHnZc.gif' alt='' width='1000' height='auto'>

1.  åœ¨ proxy å®ä¾‹åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œè°ƒç”¨äº† `createGroupForFirstScreen` æ–¹æ³•ï¼Œ`createGroupForFirstScreen` å‡½æ•°çš„ä¸»è¦ç”¨äºåˆå§‹åŒ– **Canvasè¡¨æ ¼çš„é¦–å±æ¸²æŸ“åŒºåŸŸ**ï¼Œè´Ÿè´£è®¡ç®—é¦–å±éœ€è¦åˆ›å»ºçš„è¡Œåˆ—æ•°ã€æ„å»ºè¡¨å¤´ã€å†»ç»“è¡Œåˆ—ã€ä¸»ä½“åŒºåŸŸç­‰æ ¸å¿ƒéƒ¨åˆ†çš„ç»˜åˆ¶å•å…ƒï¼ˆGroupï¼‰çš„å¡«å……ã€å•å…ƒæ ¼å›¾å…ƒçš„åˆ›å»ºä¸æ ·å¼è°ƒæ•´ã€åŠ¨æ€è®¡ç®—è¡Œåˆ—å°ºå¯¸ã€æ ¹æ®é…ç½®å¤„ç†å†»ç»“åŒºåŸŸå¸ƒå±€ã€åˆ†å—æ¸²æŸ“ç­–ç•¥ç­‰ï¼Œå®ç°é«˜æ€§èƒ½çš„åˆå§‹æ¸²æŸ“ã€‚    

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/UsM0brFm4omOHexxWyqcDQrGndc.gif' alt='' width='700' height='auto'>

*  packages\vtable\src\scenegraph\group-creater\progress\create-group-for-first-screen.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/DqH9bfBibo3iVhxWOHIc32vSnHE.gif' alt='' width='1000' height='auto'>

*  packages\vtable\src\scenegraph\group-creater\progress\create-group-for-first-screen.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Eym7bijCdoCMz1xtyKTcDdeEnHd.gif' alt='' width='879' height='auto'>

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/XH0zbfQhloobUQxC7v5coALanhc.gif' alt='' width='1000' height='auto'>

1. å®Œæˆé¦–å±åˆ†ç»„åˆ›å»ºä¹‹åï¼Œè°ƒç”¨äº† afterScenegraphCreatedï¼Œå¯¹è¡Œé«˜åˆ—å®½è¿›è¡Œè‡ªåŠ¨è°ƒæ•´ï¼Œå®Œæˆ åœºæ™¯æ ‘ çš„è°ƒæ•´ï¼Œç”¨äºrenderæ–¹æ³•ã€‚    

*  packages\vtable\src\scenegraph\group-creater\progress\create-group-for-first-screen.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/YC5abzMZIorJBjxpefIcXP9knah.gif' alt='' width='846' height='auto'>

---
åœ¨å®Œæˆè¡¨æ ¼çš„æ¸²æŸ“å’Œå„ç»„ä»¶çš„åˆå§‹åŒ–ä¹‹åï¼Œåœ¨ ListTable çš„æœ€åä¸€è¡Œï¼Œé€šè¿‡ fireListeners è§¦å‘ INITIALIZED å›è°ƒï¼Œå®Œæˆç”Ÿå‘½å‘¨æœŸçš„æœ€åä¸€æ­¥ï¼Œè‡³æ­¤åˆå§‹åŒ–å®Œæˆã€‚    

*  packages\vtable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/NzqGbDR0wowsMXxnnF8cysySnkf.gif' alt='' width='1000' height='auto'>

*  å¤§è‡´æµç¨‹å›¾    

![](https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/MtUYwkfgehXJOmbBNdhct1fknMh.gif)

### æ›´æ–°æµç¨‹

VTable æä¾›äº†äº”ç§æ–¹æ³•ç”¨äºæ›´æ–°é…ç½®ï¼Œæœ¬æ¬¡æˆ‘ä»¬ä»æœ€å¸¸ç”¨çš„ [updateOption](https://visactor.io/vtable/api/Methods#updateOption) æ–¹æ³•åˆ‡å…¥ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/E4BJbIjOuoYfMex4hTDcwGA0nIb.gif' alt='' width='383' height='auto'>

é€šè¿‡æ–­ç‚¹åˆ†æï¼Œå‘ç°ä¸€å¼€å§‹ç›´æ¥è°ƒç”¨äº† ListTable çš„çˆ¶ç±» BaseTable çš„ updateOption æ–¹æ³•ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Ms9YbMRMfo1EqbxIN1mc0znnnkd.gif' alt='' width='674' height='auto'>

è¿›å…¥åˆ° BaseTable ä¸­ï¼Œå…ˆæ˜¯å°† options ä¸­ `ListTable` å’Œ `PivotTable` çš„è¡¨æ ¼é€šç”¨çš„å±æ€§æå–å‡ºæ¥ï¼Œç„¶åæ›´æ–°åƒç´ æ¯”å’Œ paddingã€‚ç´§æ¥ç€å°±æ˜¯æ›´æ–°å„ç§å±æ€§ï¼ŒåŒ…æ‹¬ `widthMode`ã€`heightMode` ç­‰ã€‚    

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/PBvObXtlBoEMzfxB8BXciyVnn1c.gif' alt='' width='1000' height='auto'>

åŒæ—¶è¿˜ä¼šæ¸…ç©ºè¡Œé«˜å’Œåˆ—å®½ç­‰é…ç½®ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/VgktbCIPBoezGrx44BYcVi6jnAh.gif' alt='' width='1000' height='auto'>

è°ƒæ•´ä¸»é¢˜å’ŒIconé…ç½®ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/MG9IbtcJ5o49q7x6Bd8cS59inXj.gif' alt='' width='1000' height='auto'>

è°ƒæ•´èƒŒæ™¯é¢œè‰²ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Gkl4bDF9UoBzoKxG0JncCC1ZnSh.gif' alt='' width='762' height='auto'>

é‡Šæ”¾æ—§çš„ titleã€legend ã€ emptyTip å’Œ layoutMap å®ä¾‹ï¼ŒåŒæ—¶è°ƒç”¨ `sceneGraph.clearCells` æ¸…ç©ºå•å…ƒæ ¼ã€‚    

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CrR8bKRGyoWnUixnBh4cxIYgnne.gif' alt='' width='533' height='auto'>

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/HAvEbOjZmoEdudx8f1ZcACz6nnh.gif' alt='' width='554' height='auto'>

æ ¹æ®æ–°é…ç½®ï¼Œè°ƒç”¨`updateComponent`ï¼Œ`updateComponent` å†…éƒ¨ä¼šè°ƒç”¨ `scenegraph.updateComponent`, scenegraph ä¸­ç»§ç»­è°ƒç”¨ `updateStyle`ï¼Œé‡æ–°æ›´æ–°è¡¨æ ¼å¤–ç»„ä»¶æ ·å¼ï¼Œè¿™é‡Œçš„æ›´æ–°åŒ…æ‹¬äº†æ»šåŠ¨æ¡ã€æ‹–æ‹½å‚è€ƒçº¿å’Œå†»ç»“åˆ—é˜´å½±ç­‰ã€‚    

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Il93br7msob846xrCh2c9iacnKg.gif' alt='' width='521' height='auto'>

*  packages\vtable\src\scenegraph\scenegraph.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Gje5bgINnoyTMAxbsfKcWZmfng6.gif' alt='' width='340' height='auto'>

*  packages/vtable/src/scenegraph/component/table-component.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/EdtXbzZcGo2a4Mxo9kHc3wbSngg.gif' alt='' width='1000' height='auto'>

æ›´æ–°å®Œå¤–ç»„ä»¶æ ·å¼ä¹‹åï¼Œè°ƒç”¨ updateOptionSetState é‡æ–°æ›´æ–° State ä¸­çš„é…ç½®ï¼ŒåŒ…æ‹¬é«˜äº®æ¨¡å¼ã€å†»ç»“åˆ—çŠ¶æ€ã€hover ä¸ select çŠ¶æ€ã€‚    

*  packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/NEMnbIktooOlYgxAGaZcUECmnVb.gif' alt='' width='627' height='auto'>

*  packages\vtable\src\state\state.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/GJiFb62pUoOq3jxWLNDcQdJNnJe.gif' alt='' width='741' height='auto'>

ä¹‹åé€šè¿‡ `this._updateSize` é‡æ–°è®¡ç®— `canvas` å®½é«˜ã€‚å†è°ƒç”¨`this.eventManager.updateEventBinder` æ›´æ–°æ»šåŠ¨äº‹ä»¶ä¸æ–‡æœ¬å¸é™„çš„ç»‘å®šã€‚    

*  packages\vtable\src\event\event.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/MZIUbSxteoxDDZx9tnpcvhWMncf.gif' alt='' width='938' height='auto'>

åœ¨ `updateEventBinder` å†…éƒ¨ä¹Ÿä¼šé¡ºå¸¦å»æ›´æ–°ç»‘å®šè¿·ä½ å›¾ç±»å‹çš„ hover äº‹ä»¶çŠ¶æ€ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/OAGMbAZK4o40TJxSHOvcuFtwnyd.gif' alt='' width='499' height='auto'>

*  packages\vtable\src\event\sparkline-event.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/B2Bhbt6eKo4juUxHOBOcv2bOn3m.gif' alt='' width='1000' height='auto'>

---
æ¥ä¸‹æ¥ä¾æ¬¡æ›´æ–°å›¾ä¾‹ã€tooltipã€ä¸‹æ‹‰èœå•ç­‰é…ç½®ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/ObF7bZOD9o5xWhxYhQXcJ04zntU.gif' alt='' width='851' height='auto'>

æ¸…é™¤å•å…ƒæ ¼æ ·å¼ã€åˆ—å®½å’Œè¡Œé«˜ç¼“å­˜ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/PA6YbELhhomnZMxhdiHcVhInn4b.gif' alt='' width='610' height='auto'>

æ›´æ–°è‡ªå®šä¹‰å•å…ƒæ ¼åˆå¹¶è§„åˆ™ï¼ˆ[customMergeCell](https://visactor.io/vtable/option/ListTable#customMergeCell)ï¼‰    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/M2BbbCMQHoM5GpxGmLlcnLz1nCf.gif' alt='' width='840' height='auto'>

*  packages\vtable\src\core\utils\get-custom-merge-cell-func.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Pl6HbKPAjoRgNCxHHXkcUrqYnef.gif' alt='' width='998' height='auto'>

æœ€åé‡æ–°è°ƒæ•´canvaså°ºå¯¸ï¼Œè‡³æ­¤ BaseTable å†…éƒ¨çš„updateOptionå·²å®Œæˆï¼Œé‡æ–°å›åˆ°ListTableå†…éƒ¨ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Fp9abgIxzoWqOkx4n1vcl20en9T.gif' alt='' width='588' height='auto'>

é¦–å…ˆæ˜¯æ›´æ–°äº†åˆ†é¡µé…ç½®ã€sortStateã€dataConfigã€showHeaderã€columns é…ç½®ï¼›    

*  packages\vtable\src\ListTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/WeAGbLDuDoqjDCxH2wgciQ0gnFM.gif' alt='' width='901' height='auto'>

ç„¶åä½¿ç”¨ `generateAggregationForColumn` å»æ›´æ–°æ¯ä¸€åˆ—çš„èšåˆé…ç½®ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/BG2Gb9iNuoOyZdx3Q8JcOXJXn7b.gif' alt='' width='603' height='auto'>

å¤„ç†è½¬ç½®ã€è°ƒç”¨ `refreshHeader` æ›´æ–°è¡¨å¤´ã€æ›´æ–°åˆ—å®½é…ç½®ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/SpZWbrRPgo4sIWxjdKXcSd54ndd.gif' alt='' width='841' height='auto'>

æ¸…ç©º `releaseList`ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/YXnqboICFo700lx7XVZc2gX3n5c.gif' alt='' width='906' height='auto'>

è°ƒæ•´ dataSourceã€æˆ–è€…æ˜¯è°ƒç”¨ setRecords ã€äº¦æˆ–æ˜¯ç›´æ¥è°ƒç”¨ render æ–¹æ³•ï¼Œå‰é¢æåˆ°è¿‡ï¼Œè¿™ä¸‰ç§æ–¹æ³•éƒ½èƒ½ç›´æ¥è§¦å‘è¡¨æ ¼æ¸²æŸ“ï¼Œåˆ°è¿™ä¸ªæ—¶å€™è¡¨æ ¼çš„æ›´æ–°å·²ç»åŸºæœ¬å®Œæˆäº†ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/QQiHbD2PDow9jMxVXC6c47NfnSD.gif' alt='' width='824' height='auto'>

åœ¨æ›´æ–°å®Œæ•°æ®æºåï¼Œé‡æ–°ç”Ÿæˆäº† `title` å’Œ `emptyTip` å®ä¾‹ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ—§çš„`title` å’Œ `emptyTip` æ—©åœ¨ BaseTable ä¸­çš„ updateOption è¿‡ç¨‹å°±å·²è¢«é‡Šæ”¾ï¼›    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Bz6Pbtd6noUJ1sxLwGbc6ZzHnae.gif' alt='' width='929' height='auto'>

ç”±äºå†…éƒ¨å«æœ‰å¼‚æ­¥çš„æ¸²æŸ“æ“ä½œï¼Œæ‰€ä»¥åœ¨ updateOption çš„æœ€åï¼ŒVTable é€šè¿‡è¿”å› Promise ï¼Œç¡®ä¿äº†èƒ½åœ¨ await updateOption çš„æ—¶å€™å®Œæˆè¡¨æ ¼ç»„ä»¶æ¸²æŸ“ã€‚è‡³æ­¤ VTable çš„å…¨é‡æ›´æ–°å·²ç»å®Œæˆã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/XxcDbN0VRocTaJxQI7vcm9jdnXe.gif' alt='' width='706' height='auto'>

*  å¤§è‡´æµç¨‹å›¾    

![](https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CfZow5lBdhVkpsb63MCcf2hGnke.gif)

### é”€æ¯æµç¨‹

ç†è§£æ›´æ–°æœºåˆ¶æ˜¯ç»´æŠ¤æ•°æ®çš„å…³é”®ï¼Œè€Œå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†åŒæ ·éœ€è¦è§„èŒƒçš„é”€æ¯æµç¨‹ã€‚å½“è¡¨æ ¼æ— éœ€ä½¿ç”¨æ—¶ï¼Œåº”è¯¥åŠæ—¶é€šè¿‡é”€æ¯æµç¨‹ä¸»åŠ¨é‡Šæ”¾ä¸å†éœ€è¦çš„å¯¹è±¡ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œèµ„æºæµªè´¹ã€‚    

VTable å®ä¾‹æä¾›äº† [release](https://visactor.io/vtable/api/Methods#release) æ–¹æ³•ç”¨äºé”€æ¯è¡¨æ ¼äº‹ä¾‹ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/GG58bIa2Jof3EWxESDJcwI0qnHd.gif' alt='' width='1000' height='auto'>

é€šè¿‡åœ¨æ–‡ä»¶ä¸­æœç´¢ï¼Œå¯ä»¥å‘ç° release å®šä¹‰åœ¨ BaseTable ç±»ä¸­ï¼Œåœ¨å¼€å§‹æ—¶ä¼šé€šè¿‡ isReleased å­—æ®µåˆ¤æ–­æ˜¯å¦æ­£åœ¨é”€æ¯è¿‡ç¨‹ä¸­ï¼Œé¿å…å®ä¾‹é‡å¤å¸è½½ã€‚æ¥ä¸‹æ¥çš„ä¸‰è¡Œä»£ç åˆ†åˆ«æ˜¯é”€æ¯äº† tooltipHandler å’Œ menuHandler å®ä¾‹ã€‚    

*  VTable\packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/L8kvbAWFjo4rB5x1bvUcxYrtnCg.gif' alt='' width='568' height='auto'>

éšåè°ƒç”¨äº†çˆ¶ç±»çš„ release æ–¹æ³•ï¼Œä¸Šæ–‡æåˆ°è¿‡ï¼ŒBaseTable ç»§æ‰¿äº† EventTargetï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨ `EventTarget.release` å»é‡Šæ”¾æ‰€æœ‰çš„è®¢é˜…äº‹ä»¶ã€‚    

*  VTable\packages\vtable\src\event\EventTarget.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/R89hbhvLvokiPFx2WnpchywenHh.gif' alt='' width='601' height='auto'>

éšåä¾æ¬¡é‡Šæ”¾ EventHandlerå®ä¾‹ã€eventManagerã€focusControlã€legendsã€titleã€emptyTipã€layoutMapã€stageã€proxyã€‚åœ¨å®Œæˆé‡Šæ”¾åï¼Œè°ƒç”¨ parentElement.removeChild ç§»é™¤æŒ‚è½½çš„ DOM å…ƒç´ ã€‚    

<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">Stage.release æ–¹æ³•ä½äº VRender å†…éƒ¨ï¼Œä¸»è¦ä½œç”¨é”€æ¯æ•´ä¸ª Stageï¼ŒåŒæ—¶æ¸…ç©ºå›¾è¡¨ï¼Œåœ¨è¿™ä¸€æ­¥å›¾è¡¨å†…å®¹å°±å·²ç»æ¶ˆå¤±äº†ã€‚    
</div>
*  VTable\packages\vtable\src\core\BaseTable.ts    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/W7Xbb6aqvo8nQ5xJZtCcN4Ydnuf.gif' alt='' width='850' height='auto'>

åœ¨é‡Šæ”¾å®Œä¸Šè¿°ç»„ä»¶åï¼Œæ›´æ–° isReleased çŠ¶æ€ï¼Œé¿å…é‡å¤è¿›è¡Œ release æ“ä½œï¼›æ¸…ç©ºåœºæ™¯æ ‘ï¼ŒinternalPropsã€‚è‡³æ­¤å®Œæˆäº†è¡¨æ ¼ç»„ä»¶çš„æ•´ä¸ªé”€æ¯è¿‡ç¨‹ã€‚    

<img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/JDmHbyk2joDSP5xt0bYcDUi2nmD.gif' alt='' width='661' height='auto'>

### æ€»ç»“

#### 1. åˆå§‹åŒ–æµç¨‹

**æ ¸å¿ƒæµç¨‹**    

*  **å…¥å£**ï¼š`ListTable`/`PivotTable`æ„é€ å‡½æ•°ç»§æ‰¿`BaseTable`ï¼Œå¤„ç†é…ç½®å‚æ•°åè°ƒç”¨`super()`è¿›å…¥çˆ¶ç±»åˆå§‹åŒ–ã€‚    

*  **äº‹ä»¶åˆå§‹åŒ–**ï¼š`BaseTable`ç»§æ‰¿`EventTarget`å®ç°äº‹ä»¶è®¢é˜…æœºåˆ¶ï¼Œæ”¯æŒ`resize`ç­‰äº‹ä»¶ç›‘å¬ã€‚    

*  **DOMæŒ‚è½½**ï¼šåˆ›å»ºæ ¹å…ƒç´ `div`å¹¶æŒ‚è½½åˆ°å®¹å™¨ï¼Œä½œä¸ºè¡¨æ ¼æ¸²æŸ“çš„å®¹å™¨ã€‚    

*  **åœºæ™¯å›¾æ„å»º**ï¼šé€šè¿‡`scenegraph`æ¨¡å—åˆ›å»º`VRender Stage`ï¼Œç®¡ç†æ¸²æŸ“æ ‘å’Œé¦–å±æ¸²æŸ“é€»è¾‘ã€‚    

*  é¦–å±æ¸²æŸ“ï¼š`createGroupForFirstScreen`åˆ›å»ºè¡¨å¤´ã€å†»ç»“è¡Œåˆ—ã€ä¸»ä½“åŒºåŸŸå›¾å…ƒï¼ŒåŠ¨æ€è®¡ç®—è¡Œåˆ—å°ºå¯¸ã€‚    

*  ä»£ç†æ¸²æŸ“ï¼š`SceneProxy`ç®¡ç†æ¸è¿›å¼æ¸²æŸ“ç­–ç•¥ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚    

*  **æ•°æ®æºå¤„ç†**ï¼šæ ¹æ®`dataSource`æˆ–`records`è§¦å‘`createSceneGraph`å’Œ`render`ï¼Œå®Œæˆé¦–æ¬¡æ¸²æŸ“ã€‚    

*  **å›è°ƒè§¦å‘**ï¼šé€šè¿‡`fireListeners`è§¦å‘`INITIALIZED`äº‹ä»¶ï¼Œæ ‡å¿—åˆå§‹åŒ–å®Œæˆã€‚    

**å…³é”®æ–‡ä»¶**    

*  `ListTable.ts`/`PivotTable.ts`ï¼šå…¥å£ç±»ï¼Œå¤„ç†è¡¨ç±»å‹å·®å¼‚ã€‚    

*  `BaseTable.ts`ï¼šæ ¸å¿ƒé…ç½®å¤„ç†ã€DOMæŒ‚è½½ã€åœºæ™¯å›¾/çŠ¶æ€/äº‹ä»¶ç®¡ç†å™¨åˆå§‹åŒ–ã€‚    

*  `scenegraph.ts`ï¼šåœºæ™¯æ ‘ç®¡ç†ï¼Œä¸`VRender`äº¤äº’ã€‚    

*  `create-group-for-first-screen.ts`ï¼šé¦–å±æ¸²æŸ“é€»è¾‘å®ç°ã€‚    

---
#### 2. æ›´æ–°æµç¨‹

**æ ¸å¿ƒæµç¨‹**    

*  **å…¥å£æ–¹æ³•**ï¼š`updateOption`è§¦å‘å…¨é‡æ›´æ–°ã€‚    

*  **é…ç½®æ›´æ–°**ï¼š    

*  æ›´æ–°é€šç”¨å±æ€§ï¼ˆä¸»é¢˜ã€å°ºå¯¸æ¨¡å¼ã€èƒŒæ™¯ç­‰ï¼‰ã€‚    

*  æ¸…ç©ºç¼“å­˜ï¼ˆè¡Œé«˜åˆ—å®½ã€å•å…ƒæ ¼æ ·å¼ï¼‰ã€‚    

*  é‡Šæ”¾æ—§ç»„ä»¶ï¼ˆæ ‡é¢˜ã€å›¾ä¾‹ã€å¸ƒå±€æ˜ å°„ï¼‰ã€‚    

*  **åœºæ™¯é‡å»º**ï¼š    

*  è°ƒç”¨`sceneGraph.clearCells`æ¸…ç©ºå•å…ƒæ ¼ã€‚    

*  é‡æ–°åˆ›å»ºç»„ä»¶ï¼ˆæ»šåŠ¨æ¡ã€å†»ç»“é˜´å½±ï¼‰å¹¶æ›´æ–°æ ·å¼ã€‚    

*  **çŠ¶æ€åŒæ­¥**ï¼šæ›´æ–°é«˜äº®ã€é€‰ä¸­ã€å†»ç»“ç­‰äº¤äº’çŠ¶æ€ã€‚    

*  **å¼‚æ­¥æ¸²æŸ“**ï¼šé€šè¿‡`Promise`ç¡®ä¿æ¸²æŸ“å®Œæˆï¼Œæ”¯æŒ`await`åŒæ­¥ã€‚    

**å…³é”®æ–‡ä»¶**    

*  `BaseTable.ts`ï¼šé…ç½®æ›´æ–°ä¸»é€»è¾‘ã€‚    

*  `state.ts`ï¼šçŠ¶æ€ç®¡ç†æ¨¡å—ã€‚    

*  `sparkline-event.ts`ï¼šè¿·ä½ å›¾äº‹ä»¶å¤„ç†ã€‚    

---
#### 3. é”€æ¯æµç¨‹

**æ ¸å¿ƒæµç¨‹**    

*  **å…¥å£æ–¹æ³•**ï¼š`release()`    

*  **èµ„æºé‡Šæ”¾**ï¼š    

*  ç§»é™¤äº‹ä»¶ç›‘å¬ï¼šé€šè¿‡`EventTarget.release()`è§£é™¤æ‰€æœ‰è®¢é˜…ã€‚    

*  é”€æ¯DOMå…ƒç´ ï¼šç§»é™¤æ ¹èŠ‚ç‚¹åŠCanvasã€‚    

*  æ¸…ç†ç»„ä»¶ï¼šé‡Šæ”¾`Tooltip`ã€`Menu`ç­‰ç»„ä»¶å®ä¾‹ã€‚    

*  **å†…å­˜å›æ”¶**ï¼šæ¸…ç©ºåœºæ™¯æ ‘ã€æ•°æ®å¼•ç”¨ï¼Œè§¦å‘GCã€‚    

**å…³é”®è®¾è®¡**    

*  é˜²å¾¡æ€§åˆ¤æ–­ï¼šé€šè¿‡`isReleased`æ ‡å¿—é¿å…é‡å¤é”€æ¯ã€‚    

*  å±‚çº§é‡Šæ”¾ï¼šä»å­ç»„ä»¶åˆ°çˆ¶ç±»é€çº§æ¸…ç†ï¼Œç¡®ä¿æ— æ®‹ç•™å¼•ç”¨ã€‚    

**å…³é”®æ–‡ä»¶**    

*  `BaseTable.ts`ï¼š`release()`æ–¹æ³•å®ç°ã€‚    

*  `EventTarget.ts`ï¼šäº‹ä»¶ç³»ç»Ÿé”€æ¯é€»è¾‘ã€‚    

# æœ¬æ–‡æ¡£ç”±ä»¥ä¸‹äººå‘˜æä¾›

taiiiyangï¼ˆhttps://github.com/taiiiyangï¼‰    



 # æœ¬æ–‡æ¡£ç”±ä»¥ä¸‹äººå‘˜ä¿®æ­£æ•´ç† 
 [ç„é­‚](https://github.com/xuanhun)